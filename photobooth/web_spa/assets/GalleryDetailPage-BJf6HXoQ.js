import{Q as Ft}from"./QHeader-CJh4TgA2.js";import{u as $t,a as Ut,b as Vt,c as Qt,T as zt,Q as Ot}from"./use-panel-DVFZjC9M.js";import{Q as Bt}from"./QPageSticky-DhBmdmM2.js";import{Q as Ht}from"./QPage-DAiiHfxw.js";import{Q as Kt,a as xt}from"./QLayout-4rR5rd0H.js";import{Y as De,Z as Jt,_ as It,d as W,f as R,g as G,G as Ue,F as oe,n as L,H as j,k,l as N,p as Fe,s as D,q as x,t as Y,I as Yt,Q as O,A as J,m as M,E as le,X as Ve,$ as re,a0 as Gt,a1 as jt,C as $e,a2 as Je,a3 as Wt,B as Qe,o as Tt,a4 as ze,a5 as Xt,a6 as Zt,a7 as en,w as ie,v as At,e as F,z as V,O as tn,M as nn,N as rn,V as on,P as an,a8 as sn,u as ln,j as un,i as cn,W as dn,a9 as fn,L as gn}from"./index-DMTCEbHD.js";import{Q as Ye}from"./QBadge-k7FVLi5L.js";import{Q as St}from"./QLinearProgress-H1TCNiwU.js";import{_ as Pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as hn}from"./QImg-F7_Ct8Qf.js";import{u as mn,a as wn,b as pn}from"./use-fullscreen-CfF3YmdW.js";import{_ as yn,I as vn}from"./ItemNotAvailableError-BK-J11-u.js";import"./selection-CcLNwj15.js";import"./format-CJebrXOQ.js";function Cn(n){const o=Object.assign({noopener:!0},n),i=[];for(const t in o){const e=o[t];e===!0?i.push(t):(It(e)||typeof e=="string"&&e!=="")&&i.push(t+"="+e)}return i.join(",")}function Ge(n,o,i){let t=window.open;if(De.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)t=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(n,{openExternal:!0})}const e=t(n,"_blank",Cn(i));if(e)return De.is.desktop&&e.focus(),e;o&&o()}const _n=(n,o,i)=>{if(De.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(t=>{t?window.SafariViewController.show({url:n},Jt,o):Ge(n,o,i)});return}return Ge(n,o,i)},En=W({__name:"ShareTriggerButtons",props:{triggers:{},directAccessNumberOfButtons:{},currentItemIsImage:{type:Boolean}},emits:["triggerAction"],setup(n,{emit:o}){const i=n;function t(s){return console.log(i.currentItemIsImage,s),!i.currentItemIsImage&&s}const e=o;function r(s){console.log(`trigger share config_index ${s}`),e("triggerAction",s)}return(s,l)=>(R(!0),G(oe,null,Ue(s.triggers,(a,u)=>(R(),G("div",{key:u},[a.show_button&&!(L(j.isEmpty)(a.title)&&L(j.isEmpty)(a.icon))?(R(),k(O,{key:0,stack:"",rounded:"","no-caps":"",color:"primary",disabled:t(a.handles_images_only),class:Yt(["q-mr-sm action-button action-button-share col-auto",["share-button-"+u]]),onClick:f=>r(a.config_index)},{default:N(()=>[L(j.isEmpty)(a.icon)?D("",!0):(R(),k(Fe,{key:0,name:`sym_o_${a.icon}`},null,8,["name"])),x("div",null,Y(a.title),1)]),_:2},1032,["disabled","class","onClick"])):D("",!0)]))),128))}}),bn={class:"q-mb-lg action-buttons col"},Bn={class:"q-pa-md row"},In={class:"q-mr-sm row flex flex-center"},Tn={class:"q-ml-sm"},An=W({__name:"PageToolbar",props:{item:{},image_number:{},images_total:{},showDownload:{type:Boolean},showDelete:{type:Boolean},showFilter:{type:Boolean},showShare:{type:Boolean},shareDirectAccessButtons:{},shareButtons:{},enableFilter:{type:Boolean}},emits:["triggerShareAction","triggerToggleDisplayFilter","triggerDeleteMediaitem","closeEvent"],setup(n,{emit:o}){const i=J(!1),t=n,e=o;function r(a){e("triggerShareAction",a)}function s(){e("triggerToggleDisplayFilter")}function l(a){e("triggerDeleteMediaitem",a)}return(a,u)=>(R(),G(oe,null,[a.item?(R(),k(Bt,{key:0,position:"bottom",id:"gallery-toolbar",class:"toolbar"},{default:N(()=>[x("div",bn,[x("div",Bn,[a.showDelete?(R(),k(O,{key:0,stack:"",rounded:"",class:"q-mr-sm action-button action-button-delete col-auto",color:"primary","no-caps":"",icon:"sym_o_delete",label:a.$t("BTN_LABEL_GALLERY_DELETE"),onClick:u[0]||(u[0]=f=>i.value=!0)},null,8,["label"])):D("",!0),a.showFilter?(R(),k(O,{key:1,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-filter col-auto",icon:"sym_o_filter",label:a.$t("BTN_LABEL_GALLERY_FILTER"),disabled:!a.enableFilter,onClick:s},null,8,["label","disabled"])):D("",!0),a.showDownload?(R(),k(O,{key:2,stack:"","no-caps":"",rounded:"",color:"primary",class:"q-mr-sm action-button action-button-download col-auto",icon:"sym_o_download",label:a.$t("BTN_LABEL_GALLERY_DOWNLOAD"),onClick:u[1]||(u[1]=f=>L(_n)(a.item.full))},null,8,["label"])):D("",!0),a.showShare?(R(),k(En,{key:3,triggers:a.shareButtons,"direct-access-number-of-buttons":a.shareDirectAccessButtons,"current-item-is-image":["image","collage","collageimage","animationimage"].includes(a.item.media_type),onTriggerAction:r},null,8,["triggers","direct-access-number-of-buttons","current-item-is-image"])):D("",!0)]),x("div",In,[M(Ye,{color:"grey-8",class:"q-mr-xs"},{default:N(()=>[M(Fe,{name:"sym_o_image",color:"white",class:"q-mr-xs"}),le(" "+Y(a.item.caption),1)]),_:1}),t.image_number&&t.images_total?(R(),k(Ye,{key:0,color:"grey-8",class:"q-mr-xs"},{default:N(()=>[M(Fe,{name:"sym_o_tag",color:"white",class:"q-mr-xs"}),le(" "+Y(a.$t("LABEL_ELEMENT_X_OF_Y",{no:t.image_number,total:t.images_total})),1)]),_:1})):D("",!0)])])]),_:1})):D("",!0),M(Wt,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=f=>i.value=f)},{default:N(()=>[M(Ve,{id:"gallery-confirm-delete-dialog",class:"q-pa-sm",style:{"min-width":"350px"}},{default:N(()=>[M(re,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:N(()=>[M(Gt,{icon:"sym_o_delete",color:"primary","text-color":"white"}),x("span",Tn,Y(a.$t("MSG_CONFIRM_DELETE_IMAGE")),1)]),_:1}),M(jt,{align:"right"},{default:N(()=>[$e(M(O,{flat:"",label:a.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[Je]]),$e(M(O,{label:a.$t("BTN_LABEL_DELETE_IMAGE"),color:"primary",onClick:u[2]||(u[2]=f=>[l(a.item.id),a.$emit("closeEvent")])},null,8,["label"]),[[Je]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Sn=W({__name:"HeaderCountdownTimer",props:{duration:{}},emits:["triggerTimeout"],setup(n,{emit:o}){const i=n,t=J(0);let e;const r=o;function s(){clearInterval(e),t.value=0}function l(){t.value=i.duration,e=window.setInterval(()=>{t.value-=.1,t.value<=0&&(clearInterval(e),r("triggerTimeout"))},100)}return Qe(()=>{l()}),Tt(()=>{s()}),(a,u)=>t.value>=0?(R(),k(St,{key:0,id:"gallery-linear-progress-bar",class:"absolute",value:t.value/i.duration,"animation-speed":"200",color:"grey"},null,8,["value"])):D("",!0)}}),Pn={};function Rn(n,o){return R(),k(St,{class:"absolute",indeterminate:"","animation-speed":"2100",color:"primary"})}const qn=Pt(Pn,[["render",Rn]]),Nn={class:"text-center text-overline"},Mn={class:"absolute-bottom-right text-subtitle1 text-center",style:{padding:"4px","pointer-events":"none"}},kn=W({__name:"DrawerFilter",props:{id:{},availableFilter:{}},emits:["triggerApplyFilter"],setup(n,{emit:o}){const i=n,t=o;function e(r){t("triggerApplyFilter",i.id,r)}return(r,s)=>(R(),G(oe,null,[x("div",Nn,Y(r.$t("Choose your filter")),1),(R(!0),G(oe,null,Ue(r.availableFilter,l=>(R(),k(Ve,{key:l,bordered:"",class:"q-mb-sm no-shadow"},{default:N(()=>[M(re,{class:"q-pa-none"},{default:N(()=>[M(hn,{class:"rounded-borders",loading:"lazy",src:`/api/mediaprocessing/preview/${r.id}/${l}`,onClick:a=>e(l)},{default:N(()=>[x("div",Mn,Y(l),1)]),_:2},1032,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))],64))}}),Ln=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Dn=()=>{};function Fn(...n){if(n.length!==1)return ze(...n);const o=n[0];return typeof o=="function"?Xt(Zt(()=>({get:o,set:Dn}))):J(o)}var te={},ge,je;function $n(){return je||(je=1,ge=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ge}var he={},K={},We;function X(){if(We)return K;We=1;let n;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return K.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17},K.getSymbolTotalCodewords=function(t){return o[t]},K.getBCHDigit=function(i){let t=0;for(;i!==0;)t++,i>>>=1;return t},K.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');n=t},K.isKanjiModeEnabled=function(){return typeof n<"u"},K.toSJIS=function(t){return n(t)},K}var me={},Xe;function Oe(){return Xe||(Xe=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function o(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+i)}}n.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},n.from=function(t,e){if(n.isValid(t))return t;try{return o(t)}catch{return e}}}(me)),me}var we,Ze;function Un(){if(Ze)return we;Ze=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(o){const i=Math.floor(o/8);return(this.buffer[i]>>>7-o%8&1)===1},put:function(o,i){for(let t=0;t<i;t++)this.putBit((o>>>i-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),o&&(this.buffer[i]|=128>>>this.length%8),this.length++}},we=n,we}var pe,et;function Vn(){if(et)return pe;et=1;function n(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}return n.prototype.set=function(o,i,t,e){const r=o*this.size+i;this.data[r]=t,e&&(this.reservedBit[r]=!0)},n.prototype.get=function(o,i){return this.data[o*this.size+i]},n.prototype.xor=function(o,i,t){this.data[o*this.size+i]^=t},n.prototype.isReserved=function(o,i){return this.reservedBit[o*this.size+i]},pe=n,pe}var ye={},tt;function Qn(){return tt||(tt=1,function(n){const o=X().getSymbolSize;n.getRowColCoords=function(t){if(t===1)return[];const e=Math.floor(t/7)+2,r=o(t),s=r===145?26:Math.ceil((r-13)/(2*e-2))*2,l=[r-7];for(let a=1;a<e-1;a++)l[a]=l[a-1]-s;return l.push(6),l.reverse()},n.getPositions=function(t){const e=[],r=n.getRowColCoords(t),s=r.length;for(let l=0;l<s;l++)for(let a=0;a<s;a++)l===0&&a===0||l===0&&a===s-1||l===s-1&&a===0||e.push([r[l],r[a]]);return e}}(ye)),ye}var ve={},nt;function zn(){if(nt)return ve;nt=1;const n=X().getSymbolSize,o=7;return ve.getPositions=function(t){const e=n(t);return[[0,0],[e-o,0],[0,e-o]]},ve}var Ce={},rt;function On(){return rt||(rt=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};n.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},n.from=function(e){return n.isValid(e)?parseInt(e,10):void 0},n.getPenaltyN1=function(e){const r=e.size;let s=0,l=0,a=0,u=null,f=null;for(let y=0;y<r;y++){l=a=0,u=f=null;for(let C=0;C<r;C++){let g=e.get(y,C);g===u?l++:(l>=5&&(s+=o.N1+(l-5)),u=g,l=1),g=e.get(C,y),g===f?a++:(a>=5&&(s+=o.N1+(a-5)),f=g,a=1)}l>=5&&(s+=o.N1+(l-5)),a>=5&&(s+=o.N1+(a-5))}return s},n.getPenaltyN2=function(e){const r=e.size;let s=0;for(let l=0;l<r-1;l++)for(let a=0;a<r-1;a++){const u=e.get(l,a)+e.get(l,a+1)+e.get(l+1,a)+e.get(l+1,a+1);(u===4||u===0)&&s++}return s*o.N2},n.getPenaltyN3=function(e){const r=e.size;let s=0,l=0,a=0;for(let u=0;u<r;u++){l=a=0;for(let f=0;f<r;f++)l=l<<1&2047|e.get(u,f),f>=10&&(l===1488||l===93)&&s++,a=a<<1&2047|e.get(f,u),f>=10&&(a===1488||a===93)&&s++}return s*o.N3},n.getPenaltyN4=function(e){let r=0;const s=e.data.length;for(let a=0;a<s;a++)r+=e.data[a];return Math.abs(Math.ceil(r*100/s/5)-10)*o.N4};function i(t,e,r){switch(t){case n.Patterns.PATTERN000:return(e+r)%2===0;case n.Patterns.PATTERN001:return e%2===0;case n.Patterns.PATTERN010:return r%3===0;case n.Patterns.PATTERN011:return(e+r)%3===0;case n.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2===0;case n.Patterns.PATTERN101:return e*r%2+e*r%3===0;case n.Patterns.PATTERN110:return(e*r%2+e*r%3)%2===0;case n.Patterns.PATTERN111:return(e*r%3+(e+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}n.applyMask=function(e,r){const s=r.size;for(let l=0;l<s;l++)for(let a=0;a<s;a++)r.isReserved(a,l)||r.xor(a,l,i(e,a,l))},n.getBestMask=function(e,r){const s=Object.keys(n.Patterns).length;let l=0,a=1/0;for(let u=0;u<s;u++){r(u),n.applyMask(u,e);const f=n.getPenaltyN1(e)+n.getPenaltyN2(e)+n.getPenaltyN3(e)+n.getPenaltyN4(e);n.applyMask(u,e),f<a&&(a=f,l=u)}return l}}(Ce)),Ce}var se={},ot;function Rt(){if(ot)return se;ot=1;const n=Oe(),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return se.getBlocksCount=function(e,r){switch(r){case n.L:return o[(e-1)*4+0];case n.M:return o[(e-1)*4+1];case n.Q:return o[(e-1)*4+2];case n.H:return o[(e-1)*4+3];default:return}},se.getTotalCodewordsCount=function(e,r){switch(r){case n.L:return i[(e-1)*4+0];case n.M:return i[(e-1)*4+1];case n.Q:return i[(e-1)*4+2];case n.H:return i[(e-1)*4+3];default:return}},se}var _e={},ne={},it;function Hn(){if(it)return ne;it=1;const n=new Uint8Array(512),o=new Uint8Array(256);return function(){let t=1;for(let e=0;e<255;e++)n[e]=t,o[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),ne.log=function(t){if(t<1)throw new Error("log("+t+")");return o[t]},ne.exp=function(t){return n[t]},ne.mul=function(t,e){return t===0||e===0?0:n[o[t]+o[e]]},ne}var at;function Kn(){return at||(at=1,function(n){const o=Hn();n.mul=function(t,e){const r=new Uint8Array(t.length+e.length-1);for(let s=0;s<t.length;s++)for(let l=0;l<e.length;l++)r[s+l]^=o.mul(t[s],e[l]);return r},n.mod=function(t,e){let r=new Uint8Array(t);for(;r.length-e.length>=0;){const s=r[0];for(let a=0;a<e.length;a++)r[a]^=o.mul(e[a],s);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},n.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let r=0;r<t;r++)e=n.mul(e,new Uint8Array([1,o.exp(r)]));return e}}(_e)),_e}var Ee,st;function xn(){if(st)return Ee;st=1;const n=Kn();function o(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return o.prototype.initialize=function(t){this.degree=t,this.genPoly=n.generateECPolynomial(this.degree)},o.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const r=n.mod(e,this.genPoly),s=this.degree-r.length;if(s>0){const l=new Uint8Array(this.degree);return l.set(r,s),l}return r},Ee=o,Ee}var be={},Be={},Ie={},lt;function qt(){return lt||(lt=1,Ie.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}),Ie}var U={},ut;function Nt(){if(ut)return U;ut=1;const n="[0-9]+",o="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;U.KANJI=new RegExp(i,"g"),U.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),U.BYTE=new RegExp(t,"g"),U.NUMERIC=new RegExp(n,"g"),U.ALPHANUMERIC=new RegExp(o,"g");const e=new RegExp("^"+i+"$"),r=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return U.testKanji=function(a){return e.test(a)},U.testNumeric=function(a){return r.test(a)},U.testAlphanumeric=function(a){return s.test(a)},U}var ct;function Z(){return ct||(ct=1,function(n){const o=qt(),i=Nt();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(r,s){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!o.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?r.ccBits[0]:s<27?r.ccBits[1]:r.ccBits[2]},n.getBestModeForData=function(r){return i.testNumeric(r)?n.NUMERIC:i.testAlphanumeric(r)?n.ALPHANUMERIC:i.testKanji(r)?n.KANJI:n.BYTE},n.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},n.isValid=function(r){return r&&r.bit&&r.ccBits};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+e)}}n.from=function(r,s){if(n.isValid(r))return r;try{return t(r)}catch{return s}}}(Be)),Be}var dt;function Jn(){return dt||(dt=1,function(n){const o=X(),i=Rt(),t=Oe(),e=Z(),r=qt(),s=7973,l=o.getBCHDigit(s);function a(C,g,T){for(let S=1;S<=40;S++)if(g<=n.getCapacity(S,T,C))return S}function u(C,g){return e.getCharCountIndicator(C,g)+4}function f(C,g){let T=0;return C.forEach(function(S){const q=u(S.mode,g);T+=q+S.getBitsLength()}),T}function y(C,g){for(let T=1;T<=40;T++)if(f(C,T)<=n.getCapacity(T,g,e.MIXED))return T}n.from=function(g,T){return r.isValid(g)?parseInt(g,10):T},n.getCapacity=function(g,T,S){if(!r.isValid(g))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=e.BYTE);const q=o.getSymbolTotalCodewords(g),E=i.getTotalCodewordsCount(g,T),P=(q-E)*8;if(S===e.MIXED)return P;const I=P-u(S,g);switch(S){case e.NUMERIC:return Math.floor(I/10*3);case e.ALPHANUMERIC:return Math.floor(I/11*2);case e.KANJI:return Math.floor(I/13);case e.BYTE:default:return Math.floor(I/8)}},n.getBestVersionForData=function(g,T){let S;const q=t.from(T,t.M);if(Array.isArray(g)){if(g.length>1)return y(g,q);if(g.length===0)return 1;S=g[0]}else S=g;return a(S.mode,S.getLength(),q)},n.getEncodedBits=function(g){if(!r.isValid(g)||g<7)throw new Error("Invalid QR Code version");let T=g<<12;for(;o.getBCHDigit(T)-l>=0;)T^=s<<o.getBCHDigit(T)-l;return g<<12|T}}(be)),be}var Te={},ft;function Yn(){if(ft)return Te;ft=1;const n=X(),o=1335,i=21522,t=n.getBCHDigit(o);return Te.getEncodedBits=function(r,s){const l=r.bit<<3|s;let a=l<<10;for(;n.getBCHDigit(a)-t>=0;)a^=o<<n.getBCHDigit(a)-t;return(l<<10|a)^i},Te}var Ae={},Se,gt;function Gn(){if(gt)return Se;gt=1;const n=Z();function o(i){this.mode=n.NUMERIC,this.data=i.toString()}return o.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e,r,s;for(e=0;e+3<=this.data.length;e+=3)r=this.data.substr(e,3),s=parseInt(r,10),t.put(s,10);const l=this.data.length-e;l>0&&(r=this.data.substr(e),s=parseInt(r,10),t.put(s,l*3+1))},Se=o,Se}var Pe,ht;function jn(){if(ht)return Pe;ht=1;const n=Z(),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(t){this.mode=n.ALPHANUMERIC,this.data=t}return i.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let s=o.indexOf(this.data[r])*45;s+=o.indexOf(this.data[r+1]),e.put(s,11)}this.data.length%2&&e.put(o.indexOf(this.data[r]),6)},Pe=i,Pe}var Re,mt;function Wn(){if(mt)return Re;mt=1;const n=Z();function o(i){this.mode=n.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return o.getBitsLength=function(t){return t*8},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(i){for(let t=0,e=this.data.length;t<e;t++)i.put(this.data[t],8)},Re=o,Re}var qe,wt;function Xn(){if(wt)return qe;wt=1;const n=Z(),o=X();function i(t){this.mode=n.KANJI,this.data=t}return i.getBitsLength=function(e){return e*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=o.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}},qe=i,qe}var Ne={exports:{}},pt;function Zn(){return pt||(pt=1,function(n){var o={single_source_shortest_paths:function(i,t,e){var r={},s={};s[t]=0;var l=o.PriorityQueue.make();l.push(t,0);for(var a,u,f,y,C,g,T,S,q;!l.empty();){a=l.pop(),u=a.value,y=a.cost,C=i[u]||{};for(f in C)C.hasOwnProperty(f)&&(g=C[f],T=y+g,S=s[f],q=typeof s[f]>"u",(q||S>T)&&(s[f]=T,l.push(f,T),r[f]=u))}if(typeof e<"u"&&typeof s[e]>"u"){var E=["Could not find a path from ",t," to ",e,"."].join("");throw new Error(E)}return r},extract_shortest_path_from_predecessor_list:function(i,t){for(var e=[],r=t;r;)e.push(r),i[r],r=i[r];return e.reverse(),e},find_path:function(i,t,e){var r=o.single_source_shortest_paths(i,t,e);return o.extract_shortest_path_from_predecessor_list(r,e)},PriorityQueue:{make:function(i){var t=o.PriorityQueue,e={},r;i=i||{};for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e.queue=[],e.sorter=i.sorter||t.default_sorter,e},default_sorter:function(i,t){return i.cost-t.cost},push:function(i,t){var e={value:i,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=o}(Ne)),Ne.exports}var yt;function er(){return yt||(yt=1,function(n){const o=Z(),i=Gn(),t=jn(),e=Wn(),r=Xn(),s=Nt(),l=X(),a=Zn();function u(E){return unescape(encodeURIComponent(E)).length}function f(E,P,I){const b=[];let B;for(;(B=E.exec(I))!==null;)b.push({data:B[0],index:B.index,mode:P,length:B[0].length});return b}function y(E){const P=f(s.NUMERIC,o.NUMERIC,E),I=f(s.ALPHANUMERIC,o.ALPHANUMERIC,E);let b,B;return l.isKanjiModeEnabled()?(b=f(s.BYTE,o.BYTE,E),B=f(s.KANJI,o.KANJI,E)):(b=f(s.BYTE_KANJI,o.BYTE,E),B=[]),P.concat(I,b,B).sort(function(d,p){return d.index-p.index}).map(function(d){return{data:d.data,mode:d.mode,length:d.length}})}function C(E,P){switch(P){case o.NUMERIC:return i.getBitsLength(E);case o.ALPHANUMERIC:return t.getBitsLength(E);case o.KANJI:return r.getBitsLength(E);case o.BYTE:return e.getBitsLength(E)}}function g(E){return E.reduce(function(P,I){const b=P.length-1>=0?P[P.length-1]:null;return b&&b.mode===I.mode?(P[P.length-1].data+=I.data,P):(P.push(I),P)},[])}function T(E){const P=[];for(let I=0;I<E.length;I++){const b=E[I];switch(b.mode){case o.NUMERIC:P.push([b,{data:b.data,mode:o.ALPHANUMERIC,length:b.length},{data:b.data,mode:o.BYTE,length:b.length}]);break;case o.ALPHANUMERIC:P.push([b,{data:b.data,mode:o.BYTE,length:b.length}]);break;case o.KANJI:P.push([b,{data:b.data,mode:o.BYTE,length:u(b.data)}]);break;case o.BYTE:P.push([{data:b.data,mode:o.BYTE,length:u(b.data)}])}}return P}function S(E,P){const I={},b={start:{}};let B=["start"];for(let c=0;c<E.length;c++){const d=E[c],p=[];for(let m=0;m<d.length;m++){const w=d[m],v=""+c+m;p.push(v),I[v]={node:w,lastCount:0},b[v]={};for(let _=0;_<B.length;_++){const h=B[_];I[h]&&I[h].node.mode===w.mode?(b[h][v]=C(I[h].lastCount+w.length,w.mode)-C(I[h].lastCount,w.mode),I[h].lastCount+=w.length):(I[h]&&(I[h].lastCount=w.length),b[h][v]=C(w.length,w.mode)+4+o.getCharCountIndicator(w.mode,P))}}B=p}for(let c=0;c<B.length;c++)b[B[c]].end=0;return{map:b,table:I}}function q(E,P){let I;const b=o.getBestModeForData(E);if(I=o.from(P,b),I!==o.BYTE&&I.bit<b.bit)throw new Error('"'+E+'" cannot be encoded with mode '+o.toString(I)+`.
 Suggested mode is: `+o.toString(b));switch(I===o.KANJI&&!l.isKanjiModeEnabled()&&(I=o.BYTE),I){case o.NUMERIC:return new i(E);case o.ALPHANUMERIC:return new t(E);case o.KANJI:return new r(E);case o.BYTE:return new e(E)}}n.fromArray=function(P){return P.reduce(function(I,b){return typeof b=="string"?I.push(q(b,null)):b.data&&I.push(q(b.data,b.mode)),I},[])},n.fromString=function(P,I){const b=y(P,l.isKanjiModeEnabled()),B=T(b),c=S(B,I),d=a.find_path(c.map,"start","end"),p=[];for(let m=1;m<d.length-1;m++)p.push(c.table[d[m]].node);return n.fromArray(g(p))},n.rawSplit=function(P){return n.fromArray(y(P,l.isKanjiModeEnabled()))}}(Ae)),Ae}var vt;function tr(){if(vt)return he;vt=1;const n=X(),o=Oe(),i=Un(),t=Vn(),e=Qn(),r=zn(),s=On(),l=Rt(),a=xn(),u=Jn(),f=Yn(),y=Z(),C=er();function g(c,d){const p=c.size,m=r.getPositions(d);for(let w=0;w<m.length;w++){const v=m[w][0],_=m[w][1];for(let h=-1;h<=7;h++)if(!(v+h<=-1||p<=v+h))for(let A=-1;A<=7;A++)_+A<=-1||p<=_+A||(h>=0&&h<=6&&(A===0||A===6)||A>=0&&A<=6&&(h===0||h===6)||h>=2&&h<=4&&A>=2&&A<=4?c.set(v+h,_+A,!0,!0):c.set(v+h,_+A,!1,!0))}}function T(c){const d=c.size;for(let p=8;p<d-8;p++){const m=p%2===0;c.set(p,6,m,!0),c.set(6,p,m,!0)}}function S(c,d){const p=e.getPositions(d);for(let m=0;m<p.length;m++){const w=p[m][0],v=p[m][1];for(let _=-2;_<=2;_++)for(let h=-2;h<=2;h++)_===-2||_===2||h===-2||h===2||_===0&&h===0?c.set(w+_,v+h,!0,!0):c.set(w+_,v+h,!1,!0)}}function q(c,d){const p=c.size,m=u.getEncodedBits(d);let w,v,_;for(let h=0;h<18;h++)w=Math.floor(h/3),v=h%3+p-8-3,_=(m>>h&1)===1,c.set(w,v,_,!0),c.set(v,w,_,!0)}function E(c,d,p){const m=c.size,w=f.getEncodedBits(d,p);let v,_;for(v=0;v<15;v++)_=(w>>v&1)===1,v<6?c.set(v,8,_,!0):v<8?c.set(v+1,8,_,!0):c.set(m-15+v,8,_,!0),v<8?c.set(8,m-v-1,_,!0):v<9?c.set(8,15-v-1+1,_,!0):c.set(8,15-v-1,_,!0);c.set(m-8,8,1,!0)}function P(c,d){const p=c.size;let m=-1,w=p-1,v=7,_=0;for(let h=p-1;h>0;h-=2)for(h===6&&h--;;){for(let A=0;A<2;A++)if(!c.isReserved(w,h-A)){let $=!1;_<d.length&&($=(d[_]>>>v&1)===1),c.set(w,h-A,$),v--,v===-1&&(_++,v=7)}if(w+=m,w<0||p<=w){w-=m,m=-m;break}}}function I(c,d,p){const m=new i;p.forEach(function(A){m.put(A.mode.bit,4),m.put(A.getLength(),y.getCharCountIndicator(A.mode,c)),A.write(m)});const w=n.getSymbolTotalCodewords(c),v=l.getTotalCodewordsCount(c,d),_=(w-v)*8;for(m.getLengthInBits()+4<=_&&m.put(0,4);m.getLengthInBits()%8!==0;)m.putBit(0);const h=(_-m.getLengthInBits())/8;for(let A=0;A<h;A++)m.put(A%2?17:236,8);return b(m,c,d)}function b(c,d,p){const m=n.getSymbolTotalCodewords(d),w=l.getTotalCodewordsCount(d,p),v=m-w,_=l.getBlocksCount(d,p),h=m%_,A=_-h,$=Math.floor(m/_),H=Math.floor(v/_),kt=H+1,He=$-H,Lt=new a(He);let ue=0;const ae=new Array(_),Ke=new Array(_);let ce=0;const Dt=new Uint8Array(c.buffer);for(let ee=0;ee<_;ee++){const fe=ee<A?H:kt;ae[ee]=Dt.slice(ue,ue+fe),Ke[ee]=Lt.encode(ae[ee]),ue+=fe,ce=Math.max(ce,fe)}const de=new Uint8Array(m);let xe=0,Q,z;for(Q=0;Q<ce;Q++)for(z=0;z<_;z++)Q<ae[z].length&&(de[xe++]=ae[z][Q]);for(Q=0;Q<He;Q++)for(z=0;z<_;z++)de[xe++]=Ke[z][Q];return de}function B(c,d,p,m){let w;if(Array.isArray(c))w=C.fromArray(c);else if(typeof c=="string"){let $=d;if(!$){const H=C.rawSplit(c);$=u.getBestVersionForData(H,p)}w=C.fromString(c,$||40)}else throw new Error("Invalid data");const v=u.getBestVersionForData(w,p);if(!v)throw new Error("The amount of data is too big to be stored in a QR Code");if(!d)d=v;else if(d<v)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+v+`.
`);const _=I(d,p,w),h=n.getSymbolSize(d),A=new t(h);return g(A,d),T(A),S(A,d),E(A,p,0),d>=7&&q(A,d),P(A,_),isNaN(m)&&(m=s.getBestMask(A,E.bind(null,A,p))),s.applyMask(m,A),E(A,p,m),{modules:A,version:d,errorCorrectionLevel:p,maskPattern:m,segments:w}}return he.create=function(d,p){if(typeof d>"u"||d==="")throw new Error("No input text");let m=o.M,w,v;return typeof p<"u"&&(m=o.from(p.errorCorrectionLevel,o.M),w=u.from(p.version),v=s.from(p.maskPattern),p.toSJISFunc&&n.setToSJISFunction(p.toSJISFunc)),B(d,w,m,v)},he}var Me={},ke={},Ct;function Mt(){return Ct||(Ct=1,function(n){function o(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let t=i.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+i);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");const e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}n.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,s=t.scale||4;return{width:r,scale:r?4:s,margin:e,color:{dark:o(t.color.dark||"#000000ff"),light:o(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},n.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale},n.getImageWidth=function(t,e){const r=n.getScale(t,e);return Math.floor((t+e.margin*2)*r)},n.qrToImageData=function(t,e,r){const s=e.modules.size,l=e.modules.data,a=n.getScale(s,r),u=Math.floor((s+r.margin*2)*a),f=r.margin*a,y=[r.color.light,r.color.dark];for(let C=0;C<u;C++)for(let g=0;g<u;g++){let T=(C*u+g)*4,S=r.color.light;if(C>=f&&g>=f&&C<u-f&&g<u-f){const q=Math.floor((C-f)/a),E=Math.floor((g-f)/a);S=y[l[q*s+E]?1:0]}t[T++]=S.r,t[T++]=S.g,t[T++]=S.b,t[T]=S.a}}}(ke)),ke}var _t;function nr(){return _t||(_t=1,function(n){const o=Mt();function i(e,r,s){e.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=s,r.width=s,r.style.height=s+"px",r.style.width=s+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(r,s,l){let a=l,u=s;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),s||(u=t()),a=o.getOptions(a);const f=o.getImageWidth(r.modules.size,a),y=u.getContext("2d"),C=y.createImageData(f,f);return o.qrToImageData(C.data,r,a),i(y,u,f),y.putImageData(C,0,0),u},n.renderToDataURL=function(r,s,l){let a=l;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),a||(a={});const u=n.render(r,s,a),f=a.type||"image/png",y=a.rendererOpts||{};return u.toDataURL(f,y.quality)}}(Me)),Me}var Le={},Et;function rr(){if(Et)return Le;Et=1;const n=Mt();function o(e,r){const s=e.a/255,l=r+'="'+e.hex+'"';return s<1?l+" "+r+'-opacity="'+s.toFixed(2).slice(1)+'"':l}function i(e,r,s){let l=e+r;return typeof s<"u"&&(l+=" "+s),l}function t(e,r,s){let l="",a=0,u=!1,f=0;for(let y=0;y<e.length;y++){const C=Math.floor(y%r),g=Math.floor(y/r);!C&&!u&&(u=!0),e[y]?(f++,y>0&&C>0&&e[y-1]||(l+=u?i("M",C+s,.5+g+s):i("m",a,0),a=0,u=!1),C+1<r&&e[y+1]||(l+=i("h",f),f=0)):a++}return l}return Le.render=function(r,s,l){const a=n.getOptions(s),u=r.modules.size,f=r.modules.data,y=u+a.margin*2,C=a.color.light.a?"<path "+o(a.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",g="<path "+o(a.color.dark,"stroke")+' d="'+t(f,u,a.margin)+'"/>',T='viewBox="0 0 '+y+" "+y+'"',q='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+T+' shape-rendering="crispEdges">'+C+g+`</svg>
`;return typeof l=="function"&&l(null,q),q},Le}var bt;function or(){if(bt)return te;bt=1;const n=$n(),o=tr(),i=nr(),t=rr();function e(r,s,l,a,u){const f=[].slice.call(arguments,1),y=f.length,C=typeof f[y-1]=="function";if(!C&&!n())throw new Error("Callback required as last argument");if(C){if(y<2)throw new Error("Too few arguments provided");y===2?(u=l,l=s,s=a=void 0):y===3&&(s.getContext&&typeof u>"u"?(u=a,a=void 0):(u=a,a=l,l=s,s=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(l=s,s=a=void 0):y===2&&!s.getContext&&(a=l,l=s,s=void 0),new Promise(function(g,T){try{const S=o.create(l,a);g(r(S,s,a))}catch(S){T(S)}})}try{const g=o.create(l,a);u(null,r(g,s,a))}catch(g){u(g)}}return te.create=o.create,te.toCanvas=e.bind(null,i.render),te.toDataURL=e.bind(null,i.renderToDataURL),te.toString=e.bind(null,function(r,s,l){return t.render(r,l)}),te}var ir=or();const ar=en(ir);function sr(n,o){const i=Fn(n),t=J("");return ie(i,async e=>{i.value&&Ln&&(t.value=await ar.toDataURL(e,o))},{immediate:!0}),t}const lr=["src"],ur=W({__name:"PageQrCode",props:{url:{},textAbove:{},textBelow:{}},setup(n){const i=ze(n,"url"),t=sr(i,{errorCorrectionLevel:"L",margin:1,width:200});return(e,r)=>(R(),k(Ve,{class:"pb-card-qrcode no-shadow",style:{width:"200px"}},{default:N(()=>[e.textAbove?(R(),k(re,{key:0,class:"pb-qrcode-text-above q-pa-sm"},{default:N(()=>[le(Y(e.textAbove),1)]),_:1})):D("",!0),M(re,{class:"pb-qrcode-code q-pa-none q-px-sm"},{default:N(()=>[x("img",{src:L(t),style:{width:"100%"}},null,8,lr)]),_:1}),e.textBelow?(R(),k(re,{key:1,class:"pb-qrcode-text-below q-pa-sm"},{default:N(()=>[le(Y(e.textBelow),1)]),_:1})):D("",!0)]),_:1}))}}),cr=Pt(ur,[["__scopeId","data-v-202295d8"]]),dr=At({name:"QCarouselSlide",props:{...$t,imgSrc:String},setup(n,{slots:o}){const i=F(()=>n.imgSrc?{backgroundImage:`url("${n.imgSrc}")`}:{});return()=>V("div",{class:"q-carousel__slide",style:i.value},tn(o.default))}}),fr=["top","right","bottom","left"],gr=["regular","flat","outline","push","unelevated"],hr=At({name:"QCarousel",props:{...nn,...Ut,...mn,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:n=>gr.includes(n),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:n=>fr.includes(n)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...wn,...Vt],setup(n,{slots:o}){const{proxy:{$q:i}}=an(),t=rn(n,i);let e=null,r;const{updatePanelsList:s,getPanelContent:l,panelDirectives:a,goToPanel:u,previousPanel:f,nextPanel:y,getEnabledPanels:C,panelIndex:g}=Qt(),{inFullscreen:T}=pn(),S=F(()=>T.value!==!0&&n.height!==void 0?{height:n.height}:{}),q=F(()=>n.vertical===!0?"vertical":"horizontal"),E=F(()=>n.navigationPosition||(n.vertical===!0?"right":"bottom")),P=F(()=>`q-carousel q-panel-parent q-carousel--with${n.padding===!0?"":"out"}-padding`+(T.value===!0?" fullscreen":"")+(t.value===!0?" q-carousel--dark q-dark":"")+(n.arrows===!0?` q-carousel--arrows-${q.value}`:"")+(n.navigation===!0?` q-carousel--navigation-${E.value}`:"")),I=F(()=>{const w=[n.prevIcon||i.iconSet.carousel[n.vertical===!0?"up":"left"],n.nextIcon||i.iconSet.carousel[n.vertical===!0?"down":"right"]];return n.vertical===!1&&i.lang.rtl===!0?w.reverse():w}),b=F(()=>n.navigationIcon||i.iconSet.carousel.navigationIcon),B=F(()=>n.navigationActiveIcon||b.value),c=F(()=>({color:n.controlColor,textColor:n.controlTextColor,round:!0,[n.controlType]:!0,dense:!0}));ie(()=>n.modelValue,()=>{n.autoplay&&d()}),ie(()=>n.autoplay,w=>{w?d():e!==null&&(clearTimeout(e),e=null)});function d(){const w=It(n.autoplay)===!0?Math.abs(n.autoplay):5e3;e!==null&&clearTimeout(e),e=setTimeout(()=>{e=null,w>=0?y():f()},w)}Qe(()=>{n.autoplay&&d()}),Tt(()=>{e!==null&&clearTimeout(e)});function p(w,v){return V("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${w} q-carousel__navigation--${E.value}`+(n.controlColor!==void 0?` text-${n.controlColor}`:"")},[V("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},C().map(v))])}function m(){const w=[];if(n.navigation===!0){const v=o["navigation-icon"]!==void 0?o["navigation-icon"]:h=>V(O,{key:"nav"+h.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${h.active===!0?"":"in"}active`,...h.btnProps,onClick:h.onClick}),_=r-1;w.push(p("buttons",(h,A)=>{const $=h.props.name,H=g.value===A;return v({index:A,maxIndex:_,name:$,active:H,btnProps:{icon:H===!0?B.value:b.value,size:"sm",...c.value},onClick:()=>{u($)}})}))}else if(n.thumbnails===!0){const v=n.controlColor!==void 0?` text-${n.controlColor}`:"";w.push(p("thumbnails",_=>{const h=_.props;return V("img",{key:"tmb#"+h.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${h.name===n.modelValue?"":"in"}active`+v,src:h.imgSrc||h["img-src"],onClick:()=>{u(h.name)}})}))}return n.arrows===!0&&g.value>=0&&((n.infinite===!0||g.value>0)&&w.push(V("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${q.value} absolute flex flex-center`},[V(O,{icon:I.value[0],...c.value,onClick:f})])),(n.infinite===!0||g.value<r-1)&&w.push(V("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${q.value} absolute flex flex-center`},[V(O,{icon:I.value[1],...c.value,onClick:y})]))),sn(o.control,w)}return()=>(r=s(o),V("div",{class:P.value,style:S.value},[on("div",{class:"q-carousel__slides-container"},l(),"sl-cont",n.swipeable,()=>a.value)].concat(m())))}}),mr=W({__name:"PageCarouselView",props:{slicedImages:{},mediaitemId:{}},emits:["triggerChangedItem"],setup(n,{emit:o}){const i=n,t=ze(i.mediaitemId);ie(()=>i.mediaitemId,l=>{t.value=l});const e=o;function r(){console.log("TODO: add method to close dialog programmatically")}function s(l){e("triggerChangedItem",l)}return(l,a)=>$e((R(),k(hr,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=u=>t.value=u),class:"",style:{width:"100%",height:"100%"},"control-type":"flat","control-color":"primary",swipeable:"",animated:"",draggable:"false",arrows:!0,infinite:!0,"transition-prev":"slide-right","transition-next":"slide-left",onTransition:s},{default:N(()=>[(R(!0),G(oe,null,Ue(i.slicedImages,u=>(R(),k(dr,{key:u.id,name:u.id,class:"column no-wrap flex-center full-height q-pa-sm"},{default:N(()=>[M(yn,{item:u},null,8,["item"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])),[[zt,r,void 0,{mouse:!0,down:!0}]])}}),wr={key:0,class:"fixed-full"},pr={key:1},Nr=W({__name:"GalleryDetailPage",props:{startTimer:Boolean},setup(n){const o=ln(),i=un(),t=cn(),e=dn(),r=J(""),s=J(!1),l=J(!1),a=J(!1),u=n;fn(()=>{r.value=i.params.id}),ie(i,B=>{r.value=B.params.id}),Qe(()=>{l.value=u.startTimer});const f=B=>{r.value=B},y=F(()=>S(r.value)),C=F(()=>e.collection.findIndex(B=>B.id==r.value)+1),g=F(()=>t.getConfigElement("uisettings.gallery_show_filter",!1)&&q(y.value.media_type)),T=F(()=>{const B=[];return t.getConfigElement("share.actions",[]).forEach((d,p)=>{const m={config_index:p,handles_images_only:j.get(d,"action.handles_images_only",!1),show_button:j.get(d,"trigger.ui_trigger.show_button",!1),title:j.get(d,"trigger.ui_trigger.title",""),icon:j.get(d,"trigger.ui_trigger.icon","")};B.push(m)}),console.log(B),B}),S=B=>e.collection.find(c=>c.id==B),q=B=>["image","collageimage","animationimage"].includes(B),E=async B=>{await fetch(B,{cache:"reload",mode:"no-cors"});const c=new Date().getTime();document.body.querySelectorAll(`img[src*='${B}']`).forEach(d=>{d.src=B+"#"+c})},P=(B,c)=>{a.value=!0,fetch(`/api/mediaprocessing/applyfilter/${B}/${c}`).then(d=>{if(!d.ok)throw new Error("Server returned "+d.status);const p=S(B);E(p.full),E(p.preview),E(p.thumbnail),a.value=!1}).catch(d=>{console.error(d),a.value=!1})},I=B=>{r.value=void 0,fetch("/api/mediacollection/delete",{method:"POST",body:JSON.stringify({image_id:B}),headers:{"Content-Type":"application/json"}}).then(c=>{if(!c.ok)throw new Error("Server returned "+c.status)}).then(c=>{console.log(c)}).catch(c=>{console.error("There was a problem with the Fetch operation:",c),o.notify({message:"Error deleting file! Please check logs and browser console.",type:"negative"})})},b=B=>{console.log(r.value,B),gn(`/api/share/actions/${r.value}/${B}`)};return(B,c)=>(R(),k(xt,{view:"hhh Lpr ffr",onClick:c[5]||(c[5]=d=>l.value=!1)},{default:N(()=>[y.value?(R(),G("div",wr,[M(Ft,{class:"bg-primary text-white"},{default:N(()=>[l.value?(R(),k(Sn,{key:0,duration:L(t).getConfigElement("uisettings.AUTOCLOSE_NEW_ITEM_ARRIVED",0),onTriggerTimeout:c[0]||(c[0]=d=>B.$router.push({path:"/"}))},null,8,["duration"])):D("",!0),a.value?(R(),k(qn,{key:1})):D("",!0)]),_:1}),g.value?(R(),k(Ot,{key:0,id:"gallery-drawer-filters",modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=d=>s.value=d),class:"q-pa-sm",side:"right",overlay:"",elevated:""},{default:N(()=>[M(kn,{id:y.value.id,"available-filter":L(t).getConfigElement("uisettings.gallery_filter_userselectable",[]),onTriggerApplyFilter:P},null,8,["id","available-filter"])]),_:1},8,["modelValue"])):D("",!0),M(Kt,{class:"q-pa-none galleryimagedetail full-height"},{default:N(()=>[M(Ht,{class:"full-height"},{default:N(()=>[M(mr,{"mediaitem-id":y.value.id,"sliced-images":L(e).collection,onTriggerChangedItem:f,onClick:c[2]||(c[2]=d=>s.value=!1)},null,8,["mediaitem-id","sliced-images"]),L(t).getConfigElement("uisettings.gallery_show_qrcode",!1)?(R(),k(Bt,{key:0,position:"top-right",class:"q-ma-lg"},{default:N(()=>[M(cr,{url:y.value.share_url,"text-above":L(t).getConfigElement("uisettings.qrcode_text_above",""),"text-below":L(t).getConfigElement("uisettings.qrcode_text_below","")},null,8,["url","text-above","text-below"])]),_:1})):D("",!0),M(An,{item:y.value,"show-filter":L(t).getConfigElement("uisettings.gallery_show_filter",!1),"enable-filter":q(y.value.media_type),"show-share":L(t).getConfigElement("share.sharing_enabled",!1),"share-direct-access-buttons":L(t).getConfigElement("share.number_direct_access_buttons",1),"share-buttons":T.value,"show-delete":L(t).getConfigElement("uisettings.gallery_show_delete",!1),"show-download":L(t).getConfigElement("uisettings.gallery_show_download",!1),image_number:C.value,images_total:L(e).collection_number_of_items,onTriggerToggleDisplayFilter:c[3]||(c[3]=d=>s.value=!s.value),onTriggerDeleteMediaitem:c[4]||(c[4]=d=>[I,B.$router.back()]),onTriggerShareAction:b},null,8,["item","show-filter","enable-filter","show-share","share-direct-access-buttons","share-buttons","show-delete","show-download","image_number","images_total"])]),_:1})]),_:1})])):(R(),G("div",pr,[M(vn)]))]),_:1}))}});export{Nr as default};
