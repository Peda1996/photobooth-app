import{s as F,z as q,a9 as E,aa as $,ab as A,A as I,y as R,M as D,N as L,ac as N,ad as k,ae as j,af as O,ag as M,d as T,a as z,ah as K,ai as U,_ as Z,f as G,k as H,l as m,m as u,V as J,Q as B,Z as v,p as b,t as _,D as W}from"./index-DqblR8XI.js";import{Q as X}from"./QInput-Dj1KZs7v.js";import{Q as Y}from"./QPage-Dc_SinF-.js";import"./use-key-composition-Br0Ggmzu.js";import"./use-id-BRhlPSbD.js";const ee=F({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:l,emit:f}){const r=L(),d=q(null);let s=0;const a=[];function h(e){const c=typeof e=="boolean"?e:o.noErrorFocus!==!0,g=++s,C=(t,n)=>{f(`validation${t===!0?"Success":"Error"}`,n)},P=t=>{const n=t.validate();return typeof n.then=="function"?n.then(i=>({valid:i,comp:t}),i=>({valid:!1,comp:t,err:i})):Promise.resolve({valid:n,comp:t})};return(o.greedy===!0?Promise.all(a.map(P)).then(t=>t.filter(n=>n.valid!==!0)):a.reduce((t,n)=>t.then(()=>P(n).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return g===s&&C(!0),!0;if(g===s){const{comp:n,err:i}=t[0];if(i!==void 0&&console.error(i),C(!1,n),c===!0){const V=t.find(({comp:Q})=>typeof Q.focus=="function"&&N(Q.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function y(){s++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&k(e);const c=s+1;h().then(g=>{c===s&&g===!0&&(o.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function S(e){e!==void 0&&k(e),f("reset"),j(()=>{y(),o.autofocus===!0&&o.noResetFocus!==!0&&p()})}function p(){O(()=>{if(d.value===null)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);e?.focus({preventScroll:!0})})}E(M,{bindComponent(e){a.push(e)},unbindComponent(e){const c=a.indexOf(e);c!==-1&&a.splice(c,1)}});let w=!1;return $(()=>{w=!0}),A(()=>{w===!0&&o.autofocus===!0&&p()}),I(()=>{o.autofocus===!0&&p()}),Object.assign(r.proxy,{validate:h,resetValidation:y,submit:x,reset:S,focus:p,getValidationComponents:()=>a}),()=>R("form",{class:"q-form",ref:d,onSubmit:x,onReset:S},D(l.default))}}),te=T({__name:"LoginPage",setup(o,{expose:l}){l();const f=z(),r=K({username:"admin",password:null}),s={router:f,user:r,submit:async()=>{try{await U(r),f.push("/admin")}catch(a){console.error(a)}}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),oe={class:"text-h5 text-weight-bold"},ae={class:""},ne={class:""},se={href:"http://photobooth-app.org/setup/admincenter/",target:"_blank",class:"text-weight-bold",style:{"text-decoration":"none"}};function re(o,l,f,r,d,s){return G(),H(Y,{id:"login-page",class:"flex flex-center"},{default:m(()=>[u(J,{class:"q-pa-md no-shadow login-card",bordered:""},{default:m(()=>[u(B,{flat:"",color:"grey",icon:"sym_o_arrow_back_ios_new",onClick:l[0]||(l[0]=a=>r.router.go(-1))}),u(ee,{ref:"form",class:"q-gutter-md",onSubmit:r.submit},{default:m(()=>[u(v,{class:"text-center"},{default:m(()=>[b("div",oe,_(o.$t("Sign in")),1),b("div",ae,_(o.$t("Sign in below to access the admin dashboard.")),1)]),_:1}),u(v,null,{default:m(()=>[u(X,{modelValue:r.user.password,"onUpdate:modelValue":l[1]||(l[1]=a=>r.user.password=a),filled:"",type:"password",label:"Password"},null,8,["modelValue"])]),_:1}),u(v,null,{default:m(()=>[u(B,{rounded:"",color:"primary",label:"Sign in",class:"full-width",type:"submit"})]),_:1}),u(v,{class:"text-center"},{default:m(()=>[b("div",ne,[W(_(o.$t("Looking for the default password or issues signing in?"))+" ",1),b("a",se,_(o.$t("Check the documentation.")),1)])]),_:1})]),_:1},512)]),_:1})]),_:1})}const me=Z(te,[["render",re],["__file","LoginPage.vue"]]);export{me as default};
