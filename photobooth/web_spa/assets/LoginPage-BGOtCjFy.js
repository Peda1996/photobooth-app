import{n as F,P as q,a6 as E,a7 as $,a8 as A,a2 as I,s as L,K as R,L as j,a9 as D,aa as Q,ab as N,ac as O,ad as K,d as T,u as U,ae as z,af as M,_ as Y,e as G,j as H,k as m,l as u,U as J,D as B,Y as g,x as b,z as _,y as W}from"./index-DyBYTJ4X.js";import{Q as X}from"./QInput-But9oDY8.js";import{Q as Z}from"./QPage-Df3VR9X2.js";import"./use-key-composition-wh9iFZse.js";import"./use-id-B2RNRfHe.js";const ee=F({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:l,emit:f}){const r=j(),d=q(null);let s=0;const a=[];function h(e){const c=typeof e=="boolean"?e:o.noErrorFocus!==!0,v=++s,P=(t,n)=>{f(`validation${t===!0?"Success":"Error"}`,n)},C=t=>{const n=t.validate();return typeof n.then=="function"?n.then(i=>({valid:i,comp:t}),i=>({valid:!1,comp:t,err:i})):Promise.resolve({valid:n,comp:t})};return(o.greedy===!0?Promise.all(a.map(C)).then(t=>t.filter(n=>n.valid!==!0)):a.reduce((t,n)=>t.then(()=>C(n).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===s&&P(!0),!0;if(v===s){const{comp:n,err:i}=t[0];if(i!==void 0&&console.error(i),P(!1,n),c===!0){const V=t.find(({comp:k})=>typeof k.focus=="function"&&D(k.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function y(){s++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&Q(e);const c=s+1;h().then(v=>{c===s&&v===!0&&(o.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function S(e){e!==void 0&&Q(e),f("reset"),N(()=>{y(),o.autofocus===!0&&o.noResetFocus!==!0&&p()})}function p(){O(()=>{if(d.value===null)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);e?.focus({preventScroll:!0})})}E(K,{bindComponent(e){a.push(e)},unbindComponent(e){const c=a.indexOf(e);c!==-1&&a.splice(c,1)}});let w=!1;return $(()=>{w=!0}),A(()=>{w===!0&&o.autofocus===!0&&p()}),I(()=>{o.autofocus===!0&&p()}),Object.assign(r.proxy,{validate:h,resetValidation:y,submit:x,reset:S,focus:p,getValidationComponents:()=>a}),()=>L("form",{class:"q-form",ref:d,onSubmit:x,onReset:S},R(l.default))}}),te=T({__name:"LoginPage",setup(o,{expose:l}){l();const f=U(),r=z({username:"admin",password:null}),s={router:f,user:r,submit:async()=>{try{await M(r),f.push("/admin")}catch(a){console.error(a)}}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),oe={class:"text-h5 text-weight-bold"},ae={class:""},ne={class:""},se={href:"http://photobooth-app.org/setup/admincenter/",target:"_blank",class:"text-weight-bold",style:{"text-decoration":"none"}};function re(o,l,f,r,d,s){return G(),H(Z,{id:"login-page",class:"flex flex-center"},{default:m(()=>[u(J,{class:"q-pa-md no-shadow login-card",bordered:""},{default:m(()=>[u(B,{flat:"",color:"grey",icon:"sym_o_arrow_back_ios_new",onClick:l[0]||(l[0]=a=>r.router.go(-1))}),u(ee,{ref:"form",class:"q-gutter-md",onSubmit:r.submit},{default:m(()=>[u(g,{class:"text-center"},{default:m(()=>[b("div",oe,_(o.$t("Sign in")),1),b("div",ae,_(o.$t("Sign in below to access the admin dashboard.")),1)]),_:1}),u(g,null,{default:m(()=>[u(X,{modelValue:r.user.password,"onUpdate:modelValue":l[1]||(l[1]=a=>r.user.password=a),filled:"",type:"password",label:"Password"},null,8,["modelValue"])]),_:1}),u(g,null,{default:m(()=>[u(B,{rounded:"",color:"primary",label:"Sign in",class:"full-width",type:"submit"})]),_:1}),u(g,{class:"text-center"},{default:m(()=>[b("div",ne,[W(_(o.$t("Looking for the default password or issues signing in?"))+" ",1),b("a",se,_(o.$t("Check the documentation.")),1)])]),_:1})]),_:1},512)]),_:1})]),_:1})}const me=Y(te,[["render",re],["__file","LoginPage.vue"]]);export{me as default};
