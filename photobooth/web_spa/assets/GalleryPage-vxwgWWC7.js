import{R as w,S as C,v as P,A as B,T as b,e as l,z as m,U as M,V as Q,O as D,d as q,f as a,g as u,m as f,q as _,i as E,W as G,r as T,k as y,l as v,F as V,G as L,n as p,X as j}from"./index-DMTCEbHD.js";import{Q as N}from"./QPage-DAiiHfxw.js";import{Q as $}from"./QImg-F7_Ct8Qf.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={threshold:0,root:null,rootMargin:"0px"};function S(e,t,n){let o,i,d;typeof n=="function"?(o=n,i=k,d=t.cfg===void 0):(o=n.handler,i=Object.assign({},k,n.cfg),d=t.cfg===void 0||C(t.cfg,i)===!1),t.handler!==o&&(t.handler=o),d===!0&&(t.cfg=i,t.observer!==void 0&&t.observer.unobserve(e),t.observer=new IntersectionObserver(([r])=>{if(typeof t.handler=="function"){if(r.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(r,t.observer)===!1||t.once===!0&&r.isIntersecting===!0)&&I(e)}},i),t.observer.observe(e))}function I(e){const t=e.__qvisible;t!==void 0&&(t.observer!==void 0&&t.observer.unobserve(e),delete e.__qvisible)}const F=w({name:"intersection",mounted(e,{modifiers:t,value:n}){const o={once:t.once===!0};S(e,o,n),e.__qvisible=o},updated(e,t){const n=e.__qvisible;n!==void 0&&S(e,n,t.value)},beforeUnmount:I}),H=P({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:n}){const o=B(b.value===!0?e.ssrPrerender:!1),i=l(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:g,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:g),d=l(()=>e.disable!==!0&&(b.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),r=l(()=>[[F,i.value,void 0,{once:e.once}]]),s=l(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function g(c){o.value!==c.isIntersecting&&(o.value=c.isIntersecting,e.onVisibility!==void 0&&n("visibility",o.value))}function h(){if(o.value===!0)return[m("div",{key:"content",style:s.value},D(t.default))];if(t.hidden!==void 0)return[m("div",{key:"hidden",style:s.value},t.hidden())]}return()=>{const c=e.transition?[m(M,{name:"q-transition--"+e.transition},h)]:h();return Q(e.tag,{class:"q-intersection"},c,"main",d.value,()=>r.value)}}}),O={key:0},R={key:1},U={class:"absolute-full"},Y=["src"],z=q({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){return(t,n)=>t.item.media_type!="video"?(a(),u("div",O,[f($,{src:t.item.thumbnail,loading:"eager","no-transition":"","no-spinner":"",ratio:1,class:"rounded-borders"},null,8,["src"])])):(a(),u("div",R,[n[0]||(n[0]=_("div",{style:{"padding-bottom":"100%"}},null,-1)),_("div",U,[_("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:t.item.thumbnail,class:"rounded-borders"},null,8,Y)])]))}}),W={key:0,class:"row justify-center q-gutter-sm"},X=["innerHTML"],J=q({__name:"GalleryPage",setup(e){const t=E(),n=G(),o=l(()=>n.collection_number_of_items==0);return(i,d)=>{const r=T("router-link");return a(),y(N,{id:"gallery-page",padding:""},{default:v(()=>[o.value?(a(),u("div",{key:1,innerHTML:p(t).getConfigElement("uisettings.GALLERY_EMPTY_MSG")},null,8,X)):(a(),u("div",W,[(a(!0),u(V,null,L(p(n).collection,s=>(a(),y(H,{key:s.id,once:"",class:"preview-item"},{default:v(()=>[f(r,{to:{name:"mediaviewer",params:{id:s.id}}},{default:v(()=>[f(j,{class:"q-ma-xs no-shadow"},{default:v(()=>[f(z,{item:s},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]))]),_:1})}}}),te=A(J,[["__scopeId","data-v-21f5a9c6"]]);export{te as default};
