import{M as w,N as C,s as I,y as P,O as y,e as l,x as g,T as B,P as $,R as Q,d as q,f as s,g as c,n as v,C as _,i as T,j as D,r as G,l as b,m,F as N,G as V,p,S as j,q as E}from"./index-BNYqvihj.js";import{Q as L}from"./QPage-DE6HUUKJ.js";import{Q as R}from"./QImg-CD3u4AKv.js";import{_ as F}from"./ReturnButton.vue_vue_type_script_setup_true_lang-DaiyN39F.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QPageSticky-D8tivGkn.js";import"./vue-i18n-MJxv9_dW.js";const k={threshold:0,root:null,rootMargin:"0px"};function S(e,n,t){let i,o,a;typeof t=="function"?(i=t,o=k,a=n.cfg===void 0):(i=t.handler,o=Object.assign({},k,t.cfg),a=n.cfg===void 0||C(n.cfg,o)===!1),n.handler!==i&&(n.handler=i),a===!0&&(n.cfg=o,n.observer!==void 0&&n.observer.unobserve(e),n.observer=new IntersectionObserver(([r])=>{if(typeof n.handler=="function"){if(r.rootBounds===null&&document.body.contains(e)===!0){n.observer.unobserve(e),n.observer.observe(e);return}(n.handler(r,n.observer)===!1||n.once===!0&&r.isIntersecting===!0)&&M(e)}},o),n.observer.observe(e))}function M(e){const n=e.__qvisible;n!==void 0&&(n.observer!==void 0&&n.observer.unobserve(e),delete e.__qvisible)}const O=w({name:"intersection",mounted(e,{modifiers:n,value:t}){const i={once:n.once===!0};S(e,i,t),e.__qvisible=i},updated(e,n){const t=e.__qvisible;t!==void 0&&S(e,t,n.value)},beforeUnmount:M}),A=I({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:n,emit:t}){const i=P(y.value===!0?e.ssrPrerender:!1),o=l(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:d,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:d),a=l(()=>e.disable!==!0&&(y.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),r=l(()=>[[O,o.value,void 0,{once:e.once}]]),u=l(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function d(f){i.value!==f.isIntersecting&&(i.value=f.isIntersecting,e.onVisibility!==void 0&&t("visibility",i.value))}function h(){if(i.value===!0)return[g("div",{key:"content",style:u.value},Q(n.default))];if(n.hidden!==void 0)return[g("div",{key:"hidden",style:u.value},n.hidden())]}return()=>{const f=e.transition?[g(B,{name:"q-transition--"+e.transition},h)]:h();return $(e.tag,{class:"q-intersection"},f,"main",a.value,()=>r.value)}}}),Y={key:0},U={key:1},z={class:"absolute-full"},J=["src"],K=q({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){return(n,t)=>n.item.media_type!="video"?(s(),c("div",Y,[v(R,{src:`/media/thumbnail/${n.item.id}`,loading:"eager","no-transition":"","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])])):(s(),c("div",U,[t[0]||(t[0]=_("div",{style:{"padding-bottom":"100%"}},null,-1)),_("div",z,[_("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${n.item.id}`,class:"rounded-borders"},null,8,J)])]))}}),W={key:0,class:"row justify-center q-gutter-sm"},X=["innerHTML"],Z=q({__name:"GalleryPage",props:{standaloneMode:Boolean},setup(e){const n=e,t=T(),i=D(),o=l(()=>i.collection_number_of_items==0);return(a,r)=>{const u=G("router-link");return s(),b(L,{id:"gallery-page",padding:""},{default:m(()=>[o.value?(s(),c("div",{key:1,innerHTML:p(t).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,X)):(s(),c("div",W,[(s(!0),c(N,null,V(p(i).collection,d=>(s(),b(A,{key:d.id,once:"",class:"preview-item"},{default:m(()=>[v(u,{to:{name:"mediaviewer",params:{id:d.id}}},{default:m(()=>[v(j,{class:"q-ma-xs no-shadow"},{default:m(()=>[v(K,{item:d},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))])),n.standaloneMode?E("",!0):(s(),b(F,{key:2,onTriggerReturn:r[0]||(r[0]=d=>a.$router.back())}))]),_:1})}}}),se=H(Z,[["__scopeId","data-v-2e8c8cdc"]]);export{se as default};
