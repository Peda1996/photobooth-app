import{Q as Vt,a as Ot}from"./QToolbar-CLFoz6BF.js";import{u as Qt,a as Ht,b as zt,c as jt,T as xt,Q as Kt}from"./use-panel-DIOAQzSG.js";import{Q as Jt}from"./QPageSticky-BIdSSEX9.js";import{Q as Yt,a as Gt}from"./QLayout-DVtPHIH-.js";import{n as Qe,s as q,V as Ue,W as $t,X as Bt,d as j,A as re,_ as x,e as A,j as D,k,f as U,F as te,B as ae,D as O,C as Je,Q as se,m as L,x as G,z as $,P as Y,l as M,y as Wt,U as He,Y as It,Z as Xt,$ as Zt,t as Ve,a0 as Ye,a1 as en,a2 as ue,o as Tt,a3 as tn,w as Oe,c as F,K as nn,I as rn,J as on,S as an,L as sn,a4 as ln,i as un,h as cn,M as dn,a5 as fn,G as gn}from"./index-DyBYTJ4X.js";import{Q as hn,a as mn}from"./QBtnDropdown-HL0oq1Iq.js";import{Q as Pt}from"./QLinearProgress-jENmI5Eb.js";import{Q as _n}from"./QImg-CI_Sy0dE.js";import{M as At,I as wn}from"./ItemNotAvailableError-wsrwxp-l.js";import{u as yn,a as pn,b as vn}from"./use-fullscreen-BDYZXnXo.js";import{u as Cn}from"./use-quasar-C9megnz2.js";import"./QMenu-Bf_79urT.js";import"./format-CJebrXOQ.js";import"./use-id-B2RNRfHe.js";const he=Qe({name:"QSpace",setup(){const t=q("div",{class:"q-space"});return()=>t}});function En(t){const r=Object.assign({noopener:!0},t),i=[];for(const e in r){const n=r[e];n===!0?i.push(e):(Bt(n)||typeof n=="string"&&n!=="")&&i.push(e+"="+n)}return i.join(",")}function Ge(t,r,i){let e=window.open;if(Ue.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)e=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(t,{openExternal:!0})}const n=e(t,"_blank",En(i));if(n)return Ue.is.desktop&&n.focus(),n;r&&r()}const bn=(t,r,i)=>{if(Ue.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(e=>{e?window.SafariViewController.show({url:t},$t,r):Ge(t,r,i)});return}return Ge(t,r,i)},Sn=j({__name:"ShareTriggerButtons",props:{triggers:{},directAccessNumberOfButtons:{},currentItemIsImage:{type:Boolean}},emits:["triggerAction"],setup(t,{expose:r,emit:i}){r();const e=t;function n(s){return console.log(e.currentItemIsImage,s),!e.currentItemIsImage&&s}const o=i;function a(s){console.log(`trigger share config_index ${s}`),o("triggerAction",s)}const l={props:e,getShareAvailable:n,emit:o,triggerButtonClick:a,get isEmpty(){return re.isEmpty}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function Bn(t,r,i,e,n,o){return A(),D(mn,{rounded:""},{default:k(()=>[(A(!0),U(te,null,ae(i.triggers.slice(0,i.directAccessNumberOfButtons),(a,l)=>(A(),U("div",{key:l},[a.show_button&&!(e.isEmpty(a.title)&&e.isEmpty(a.icon))?(A(),D(O,{key:0,flat:"",rounded:"",disabled:e.getShareAvailable(a.handles_images_only),class:Je(["share-button",["share-button-"+l]]),onClick:s=>e.triggerButtonClick(a.config_index)},{default:k(()=>[e.isEmpty(a.icon)?L("",!0):(A(),D(se,{key:0,class:"q-mr-sm",name:`sym_o_${a.icon}`},null,8,["name"])),G("div",null,$(a.title),1)]),_:2},1032,["disabled","class","onClick"])):L("",!0)]))),128)),i.triggers.length>i.directAccessNumberOfButtons?(A(),D(hn,{key:0,"auto-close":"",rounded:"",color:"primary",label:"more"},{default:k(()=>[(A(!0),U(te,null,ae(i.triggers.slice(i.directAccessNumberOfButtons),(a,l)=>(A(),U("div",{key:l,padding:"",style:{width:"250px"}},[a.show_button&&!(e.isEmpty(a.title)&&e.isEmpty(a.icon))?(A(),D(O,{key:0,flat:"",disabled:e.getShareAvailable(a.handles_images_only),class:Je(["share-button full-width",["share-button-"+l]]),onClick:s=>e.triggerButtonClick(a.config_index)},{default:k(()=>[e.isEmpty(a.icon)?L("",!0):(A(),D(se,{key:0,class:"q-mr-sm",name:`sym_o_${a.icon}`},null,8,["name"])),G("div",null,$(a.title),1)]),_:2},1032,["disabled","class","onClick"])):L("",!0)]))),128))]),_:1})):L("",!0)]),_:1})}const In=x(Sn,[["render",Bn],["__file","ShareTriggerButtons.vue"]]),Tn=j({__name:"HeaderToolbar",props:{item:{},image_number:{},images_total:{},showDownload:{type:Boolean},showDelete:{type:Boolean},showFilter:{type:Boolean},showShare:{type:Boolean},shareDirectAccessButtons:{},shareButtons:{},enableFilter:{type:Boolean}},emits:["triggerShareAction","triggerToggleDisplayFilter","triggerDeleteMediaitem","closeEvent"],setup(t,{expose:r,emit:i}){r();const e=Y(!1),n=t,o=i;function a(d){o("triggerShareAction",d)}function l(){o("triggerToggleDisplayFilter")}function s(d){o("triggerDeleteMediaitem",d)}const u={confirmDeleteDialog:e,props:n,emit:o,invokeShareAction:a,invokeToggleDisplayFilter:l,invokeDeleteMediaitem:s,get openURL(){return bn},ShareTriggerButtons:In};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Pn={key:4,class:"q-mr-sm"},An={class:"q-mr-sm"},Nn={class:"q-ml-sm"};function Mn(t,r,i,e,n,o){return A(),U(te,null,[i.item?(A(),D(Vt,{key:0,id:"gallery-toolbar",class:"toolbar"},{default:k(()=>[M(O,{dense:"",flat:"",icon:"sym_o_close",size:"1.5rem",onClick:r[0]||(r[0]=a=>t.$router.back())}),M(he),i.showDownload?(A(),D(O,{key:0,flat:"",class:"q-mr-sm",icon:"sym_o_download",label:t.$t("BTN_LABEL_GALLERY_DOWNLOAD"),onClick:r[1]||(r[1]=a=>e.openURL(i.item.full))},null,8,["label"])):L("",!0),i.showDelete?(A(),D(O,{key:1,flat:"",class:"q-mr-sm",icon:"sym_o_delete",label:t.$t("BTN_LABEL_GALLERY_DELETE"),onClick:r[2]||(r[2]=a=>e.confirmDeleteDialog=!0)},null,8,["label"])):L("",!0),i.showFilter?(A(),D(O,{key:2,flat:"",class:"q-mr-sm",icon:"sym_o_filter",label:t.$t("BTN_LABEL_GALLERY_FILTER"),disabled:!i.enableFilter,onClick:e.invokeToggleDisplayFilter},null,8,["label","disabled"])):L("",!0),i.showShare?(A(),D(e.ShareTriggerButtons,{key:3,triggers:i.shareButtons,"direct-access-number-of-buttons":i.shareDirectAccessButtons,"current-item-is-image":["image","collage","collageimage","animationimage"].includes(i.item.media_type),onTriggerAction:e.invokeShareAction},null,8,["triggers","direct-access-number-of-buttons","current-item-is-image"])):L("",!0),M(he),e.props.image_number&&e.props.images_total?(A(),U("div",Pn,[M(se,{name:"sym_o_tag"}),G("span",null,$(t.$t("LABEL_ELEMENT_X_OF_Y",{no:e.props.image_number,total:e.props.images_total})),1)])):L("",!0),M(he),G("div",An,[M(se,{name:"sym_o_image"}),Wt(" "+$(i.item.caption),1)])]),_:1})):L("",!0),M(en,{modelValue:e.confirmDeleteDialog,"onUpdate:modelValue":r[4]||(r[4]=a=>e.confirmDeleteDialog=a)},{default:k(()=>[M(He,{id:"gallery-confirm-delete-dialog",class:"q-pa-sm",style:{"min-width":"350px"}},{default:k(()=>[M(It,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:k(()=>[M(Xt,{icon:"sym_o_delete",color:"primary","text-color":"white"}),G("span",Nn,$(t.$t("MSG_CONFIRM_DELETE_IMAGE")),1)]),_:1}),M(Zt,{align:"right"},{default:k(()=>[Ve(M(O,{flat:"",label:t.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[Ye]]),Ve(M(O,{label:t.$t("BTN_LABEL_DELETE_IMAGE"),color:"primary",onClick:r[3]||(r[3]=a=>[e.invokeDeleteMediaitem(i.item.id),t.$emit("closeEvent")])},null,8,["label"]),[[Ye]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Rn=x(Tn,[["render",Mn],["__file","HeaderToolbar.vue"]]),Dn=j({__name:"HeaderCountdownTimer",props:{duration:{}},emits:["triggerTimeout"],setup(t,{expose:r,emit:i}){r();const e=t,n=Y(0);let o;const a=i;function l(){clearInterval(o),n.value=0}function s(){n.value=e.duration,o=window.setInterval(()=>{n.value-=.1,n.value<=0&&(clearInterval(o),a("triggerTimeout"))},100)}ue(()=>{s()}),Tt(()=>{l()});const u={props:e,remainingSeconds:n,get intervalTimerId(){return o},set intervalTimerId(d){o=d},emit:a,abortTimer:l,startTimer:s};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function kn(t,r,i,e,n,o){return e.remainingSeconds>=0?(A(),D(Pt,{key:0,id:"gallery-linear-progress-bar",class:"absolute",value:e.remainingSeconds/e.props.duration,"animation-speed":"200",color:"grey"},null,8,["value"])):L("",!0)}const Ln=x(Dn,[["render",kn],["__file","HeaderCountdownTimer.vue"]]),qn={};function Fn(t,r){return A(),D(Pt,{class:"absolute",indeterminate:"","animation-speed":"2100",color:"primary"})}const Un=x(qn,[["render",Fn],["__file","HeaderProcessing.vue"]]),Vn=j({__name:"DrawerFilter",props:{id:{},availableFilter:{}},emits:["triggerApplyFilter"],setup(t,{expose:r,emit:i}){r();const e=t,n=i;function o(l){n("triggerApplyFilter",e.id,l)}const a={props:e,emit:n,applyFilterClick:o};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),On={class:"text-center text-overline"},Qn={class:"absolute-bottom-right text-subtitle1 text-center",style:{padding:"4px","pointer-events":"none"}};function Hn(t,r,i,e,n,o){return A(),U(te,null,[G("div",On,$(t.$t("Choose your filter")),1),(A(!0),U(te,null,ae(i.availableFilter,a=>(A(),D(He,{key:a,bordered:"",class:"q-mb-sm no-shadow"},{default:k(()=>[M(It,{class:"q-pa-none"},{default:k(()=>[M(_n,{class:"rounded-borders",loading:"lazy",src:`/api/mediaprocessing/preview/${i.id}/${a}`,onClick:l=>e.applyFilterClick(a)},{default:k(()=>[G("div",Qn,$(a),1)]),_:2},1032,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))],64)}const zn=x(Vn,[["render",Hn],["__file","DrawerFilter.vue"]]);var ee={},me,$e;function jn(){return $e||($e=1,me=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),me}var _e={},J={},We;function W(){if(We)return J;We=1;let t;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return J.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},J.getSymbolTotalCodewords=function(e){return r[e]},J.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e},J.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');t=e},J.isKanjiModeEnabled=function(){return typeof t<"u"},J.toSJIS=function(e){return t(e)},J}var we={},Xe;function ze(){return Xe||(Xe=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+i)}}t.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return r(e)}catch{return n}}}(we)),we}var ye,Ze;function xn(){if(Ze)return ye;Ze=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(r){const i=Math.floor(r/8);return(this.buffer[i]>>>7-r%8&1)===1},put:function(r,i){for(let e=0;e<i;e++)this.putBit((r>>>i-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),r&&(this.buffer[i]|=128>>>this.length%8),this.length++}},ye=t,ye}var pe,et;function Kn(){if(et)return pe;et=1;function t(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return t.prototype.set=function(r,i,e,n){const o=r*this.size+i;this.data[o]=e,n&&(this.reservedBit[o]=!0)},t.prototype.get=function(r,i){return this.data[r*this.size+i]},t.prototype.xor=function(r,i,e){this.data[r*this.size+i]^=e},t.prototype.isReserved=function(r,i){return this.reservedBit[r*this.size+i]},pe=t,pe}var ve={},tt;function Jn(){return tt||(tt=1,function(t){const r=W().getSymbolSize;t.getRowColCoords=function(e){if(e===1)return[];const n=Math.floor(e/7)+2,o=r(e),a=o===145?26:Math.ceil((o-13)/(2*n-2))*2,l=[o-7];for(let s=1;s<n-1;s++)l[s]=l[s-1]-a;return l.push(6),l.reverse()},t.getPositions=function(e){const n=[],o=t.getRowColCoords(e),a=o.length;for(let l=0;l<a;l++)for(let s=0;s<a;s++)l===0&&s===0||l===0&&s===a-1||l===a-1&&s===0||n.push([o[l],o[s]]);return n}}(ve)),ve}var Ce={},nt;function Yn(){if(nt)return Ce;nt=1;const t=W().getSymbolSize,r=7;return Ce.getPositions=function(e){const n=t(e);return[[0,0],[n-r,0],[0,n-r]]},Ce}var Ee={},rt;function Gn(){return rt||(rt=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const o=n.size;let a=0,l=0,s=0,u=null,d=null;for(let E=0;E<o;E++){l=s=0,u=d=null;for(let p=0;p<o;p++){let g=n.get(E,p);g===u?l++:(l>=5&&(a+=r.N1+(l-5)),u=g,l=1),g=n.get(p,E),g===d?s++:(s>=5&&(a+=r.N1+(s-5)),d=g,s=1)}l>=5&&(a+=r.N1+(l-5)),s>=5&&(a+=r.N1+(s-5))}return a},t.getPenaltyN2=function(n){const o=n.size;let a=0;for(let l=0;l<o-1;l++)for(let s=0;s<o-1;s++){const u=n.get(l,s)+n.get(l,s+1)+n.get(l+1,s)+n.get(l+1,s+1);(u===4||u===0)&&a++}return a*r.N2},t.getPenaltyN3=function(n){const o=n.size;let a=0,l=0,s=0;for(let u=0;u<o;u++){l=s=0;for(let d=0;d<o;d++)l=l<<1&2047|n.get(u,d),d>=10&&(l===1488||l===93)&&a++,s=s<<1&2047|n.get(d,u),d>=10&&(s===1488||s===93)&&a++}return a*r.N3},t.getPenaltyN4=function(n){let o=0;const a=n.data.length;for(let s=0;s<a;s++)o+=n.data[s];return Math.abs(Math.ceil(o*100/a/5)-10)*r.N4};function i(e,n,o){switch(e){case t.Patterns.PATTERN000:return(n+o)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(n+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return n*o%2+n*o%3===0;case t.Patterns.PATTERN110:return(n*o%2+n*o%3)%2===0;case t.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.applyMask=function(n,o){const a=o.size;for(let l=0;l<a;l++)for(let s=0;s<a;s++)o.isReserved(s,l)||o.xor(s,l,i(n,s,l))},t.getBestMask=function(n,o){const a=Object.keys(t.Patterns).length;let l=0,s=1/0;for(let u=0;u<a;u++){o(u),t.applyMask(u,n);const d=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(u,n),d<s&&(s=d,l=u)}return l}}(Ee)),Ee}var ie={},ot;function Nt(){if(ot)return ie;ot=1;const t=ze(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ie.getBlocksCount=function(n,o){switch(o){case t.L:return r[(n-1)*4+0];case t.M:return r[(n-1)*4+1];case t.Q:return r[(n-1)*4+2];case t.H:return r[(n-1)*4+3];default:return}},ie.getTotalCodewordsCount=function(n,o){switch(o){case t.L:return i[(n-1)*4+0];case t.M:return i[(n-1)*4+1];case t.Q:return i[(n-1)*4+2];case t.H:return i[(n-1)*4+3];default:return}},ie}var be={},ne={},it;function $n(){if(it)return ne;it=1;const t=new Uint8Array(512),r=new Uint8Array(256);return function(){let e=1;for(let n=0;n<255;n++)t[n]=e,r[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)t[n]=t[n-255]}(),ne.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},ne.exp=function(e){return t[e]},ne.mul=function(e,n){return e===0||n===0?0:t[r[e]+r[n]]},ne}var at;function Wn(){return at||(at=1,function(t){const r=$n();t.mul=function(e,n){const o=new Uint8Array(e.length+n.length-1);for(let a=0;a<e.length;a++)for(let l=0;l<n.length;l++)o[a+l]^=r.mul(e[a],n[l]);return o},t.mod=function(e,n){let o=new Uint8Array(e);for(;o.length-n.length>=0;){const a=o[0];for(let s=0;s<n.length;s++)o[s]^=r.mul(n[s],a);let l=0;for(;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let o=0;o<e;o++)n=t.mul(n,new Uint8Array([1,r.exp(o)]));return n}}(be)),be}var Se,st;function Xn(){if(st)return Se;st=1;const t=Wn();function r(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(e){this.degree=e,this.genPoly=t.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const o=t.mod(n,this.genPoly),a=this.degree-o.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(o,a),l}return o},Se=r,Se}var Be={},Ie={},Te={},lt;function Mt(){return lt||(lt=1,Te.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),Te}var Q={},ut;function Rt(){if(ut)return Q;ut=1;const t="[0-9]+",r="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;Q.KANJI=new RegExp(i,"g"),Q.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Q.BYTE=new RegExp(e,"g"),Q.NUMERIC=new RegExp(t,"g"),Q.ALPHANUMERIC=new RegExp(r,"g");const n=new RegExp("^"+i+"$"),o=new RegExp("^"+t+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Q.testKanji=function(s){return n.test(s)},Q.testNumeric=function(s){return o.test(s)},Q.testAlphanumeric=function(s){return a.test(s)},Q}var ct;function X(){return ct||(ct=1,function(t){const r=Mt(),i=Rt();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!r.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return i.testNumeric(o)?t.NUMERIC:i.testAlphanumeric(o)?t.ALPHANUMERIC:i.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(o,a){if(t.isValid(o))return o;try{return e(o)}catch{return a}}}(Ie)),Ie}var dt;function Zn(){return dt||(dt=1,function(t){const r=W(),i=Nt(),e=ze(),n=X(),o=Mt(),a=7973,l=r.getBCHDigit(a);function s(p,g,B){for(let I=1;I<=40;I++)if(g<=t.getCapacity(I,B,p))return I}function u(p,g){return n.getCharCountIndicator(p,g)+4}function d(p,g){let B=0;return p.forEach(function(I){const N=u(I.mode,g);B+=N+I.getBitsLength()}),B}function E(p,g){for(let B=1;B<=40;B++)if(d(p,B)<=t.getCapacity(B,g,n.MIXED))return B}t.from=function(g,B){return o.isValid(g)?parseInt(g,10):B},t.getCapacity=function(g,B,I){if(!o.isValid(g))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=n.BYTE);const N=r.getSymbolTotalCodewords(g),C=i.getTotalCodewordsCount(g,B),P=(N-C)*8;if(I===n.MIXED)return P;const S=P-u(I,g);switch(I){case n.NUMERIC:return Math.floor(S/10*3);case n.ALPHANUMERIC:return Math.floor(S/11*2);case n.KANJI:return Math.floor(S/13);case n.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(g,B){let I;const N=e.from(B,e.M);if(Array.isArray(g)){if(g.length>1)return E(g,N);if(g.length===0)return 1;I=g[0]}else I=g;return s(I.mode,I.getLength(),N)},t.getEncodedBits=function(g){if(!o.isValid(g)||g<7)throw new Error("Invalid QR Code version");let B=g<<12;for(;r.getBCHDigit(B)-l>=0;)B^=a<<r.getBCHDigit(B)-l;return g<<12|B}}(Be)),Be}var Pe={},ft;function er(){if(ft)return Pe;ft=1;const t=W(),r=1335,i=21522,e=t.getBCHDigit(r);return Pe.getEncodedBits=function(o,a){const l=o.bit<<3|a;let s=l<<10;for(;t.getBCHDigit(s)-e>=0;)s^=r<<t.getBCHDigit(s)-e;return(l<<10|s)^i},Pe}var Ae={},Ne,gt;function tr(){if(gt)return Ne;gt=1;const t=X();function r(i){this.mode=t.NUMERIC,this.data=i.toString()}return r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let n,o,a;for(n=0;n+3<=this.data.length;n+=3)o=this.data.substr(n,3),a=parseInt(o,10),e.put(a,10);const l=this.data.length-n;l>0&&(o=this.data.substr(n),a=parseInt(o,10),e.put(a,l*3+1))},Ne=r,Ne}var Me,ht;function nr(){if(ht)return Me;ht=1;const t=X(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=t.ALPHANUMERIC,this.data=e}return i.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){let o;for(o=0;o+2<=this.data.length;o+=2){let a=r.indexOf(this.data[o])*45;a+=r.indexOf(this.data[o+1]),n.put(a,11)}this.data.length%2&&n.put(r.indexOf(this.data[o]),6)},Me=i,Me}var Re,mt;function rr(){if(mt)return Re;mt=1;const t=X();function r(i){this.mode=t.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return r.getBitsLength=function(e){return e*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){for(let e=0,n=this.data.length;e<n;e++)i.put(this.data[e],8)},Re=r,Re}var De,_t;function or(){if(_t)return De;_t=1;const t=X(),r=W();function i(e){this.mode=t.KANJI,this.data=e}return i.getBitsLength=function(n){return n*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let o=r.toSJIS(this.data[n]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),e.put(o,13)}},De=i,De}var ke={exports:{}},wt;function ir(){return wt||(wt=1,function(t){var r={single_source_shortest_paths:function(i,e,n){var o={},a={};a[e]=0;var l=r.PriorityQueue.make();l.push(e,0);for(var s,u,d,E,p,g,B,I,N;!l.empty();){s=l.pop(),u=s.value,E=s.cost,p=i[u]||{};for(d in p)p.hasOwnProperty(d)&&(g=p[d],B=E+g,I=a[d],N=typeof a[d]>"u",(N||I>B)&&(a[d]=B,l.push(d,B),o[d]=u))}if(typeof n<"u"&&typeof a[n]>"u"){var C=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(C)}return o},extract_shortest_path_from_predecessor_list:function(i,e){for(var n=[],o=e;o;)n.push(o),i[o],o=i[o];return n.reverse(),n},find_path:function(i,e,n){var o=r.single_source_shortest_paths(i,e,n);return r.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(i){var e=r.PriorityQueue,n={},o;i=i||{};for(o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n.queue=[],n.sorter=i.sorter||e.default_sorter,n},default_sorter:function(i,e){return i.cost-e.cost},push:function(i,e){var n={value:i,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r}(ke)),ke.exports}var yt;function ar(){return yt||(yt=1,function(t){const r=X(),i=tr(),e=nr(),n=rr(),o=or(),a=Rt(),l=W(),s=ir();function u(C){return unescape(encodeURIComponent(C)).length}function d(C,P,S){const b=[];let R;for(;(R=C.exec(S))!==null;)b.push({data:R[0],index:R.index,mode:P,length:R[0].length});return b}function E(C){const P=d(a.NUMERIC,r.NUMERIC,C),S=d(a.ALPHANUMERIC,r.ALPHANUMERIC,C);let b,R;return l.isKanjiModeEnabled()?(b=d(a.BYTE,r.BYTE,C),R=d(a.KANJI,r.KANJI,C)):(b=d(a.BYTE_KANJI,r.BYTE,C),R=[]),P.concat(S,b,R).sort(function(f,m){return f.index-m.index}).map(function(f){return{data:f.data,mode:f.mode,length:f.length}})}function p(C,P){switch(P){case r.NUMERIC:return i.getBitsLength(C);case r.ALPHANUMERIC:return e.getBitsLength(C);case r.KANJI:return o.getBitsLength(C);case r.BYTE:return n.getBitsLength(C)}}function g(C){return C.reduce(function(P,S){const b=P.length-1>=0?P[P.length-1]:null;return b&&b.mode===S.mode?(P[P.length-1].data+=S.data,P):(P.push(S),P)},[])}function B(C){const P=[];for(let S=0;S<C.length;S++){const b=C[S];switch(b.mode){case r.NUMERIC:P.push([b,{data:b.data,mode:r.ALPHANUMERIC,length:b.length},{data:b.data,mode:r.BYTE,length:b.length}]);break;case r.ALPHANUMERIC:P.push([b,{data:b.data,mode:r.BYTE,length:b.length}]);break;case r.KANJI:P.push([b,{data:b.data,mode:r.BYTE,length:u(b.data)}]);break;case r.BYTE:P.push([{data:b.data,mode:r.BYTE,length:u(b.data)}])}}return P}function I(C,P){const S={},b={start:{}};let R=["start"];for(let c=0;c<C.length;c++){const f=C[c],m=[];for(let h=0;h<f.length;h++){const _=f[h],y=""+c+h;m.push(y),S[y]={node:_,lastCount:0},b[y]={};for(let v=0;v<R.length;v++){const w=R[v];S[w]&&S[w].node.mode===_.mode?(b[w][y]=p(S[w].lastCount+_.length,_.mode)-p(S[w].lastCount,_.mode),S[w].lastCount+=_.length):(S[w]&&(S[w].lastCount=_.length),b[w][y]=p(_.length,_.mode)+4+r.getCharCountIndicator(_.mode,P))}}R=m}for(let c=0;c<R.length;c++)b[R[c]].end=0;return{map:b,table:S}}function N(C,P){let S;const b=r.getBestModeForData(C);if(S=r.from(P,b),S!==r.BYTE&&S.bit<b.bit)throw new Error('"'+C+'" cannot be encoded with mode '+r.toString(S)+`.
 Suggested mode is: `+r.toString(b));switch(S===r.KANJI&&!l.isKanjiModeEnabled()&&(S=r.BYTE),S){case r.NUMERIC:return new i(C);case r.ALPHANUMERIC:return new e(C);case r.KANJI:return new o(C);case r.BYTE:return new n(C)}}t.fromArray=function(P){return P.reduce(function(S,b){return typeof b=="string"?S.push(N(b,null)):b.data&&S.push(N(b.data,b.mode)),S},[])},t.fromString=function(P,S){const b=E(P,l.isKanjiModeEnabled()),R=B(b),c=I(R,S),f=s.find_path(c.map,"start","end"),m=[];for(let h=1;h<f.length-1;h++)m.push(c.table[f[h]].node);return t.fromArray(g(m))},t.rawSplit=function(P){return t.fromArray(E(P,l.isKanjiModeEnabled()))}}(Ae)),Ae}var pt;function sr(){if(pt)return _e;pt=1;const t=W(),r=ze(),i=xn(),e=Kn(),n=Jn(),o=Yn(),a=Gn(),l=Nt(),s=Xn(),u=Zn(),d=er(),E=X(),p=ar();function g(c,f){const m=c.size,h=o.getPositions(f);for(let _=0;_<h.length;_++){const y=h[_][0],v=h[_][1];for(let w=-1;w<=7;w++)if(!(y+w<=-1||m<=y+w))for(let T=-1;T<=7;T++)v+T<=-1||m<=v+T||(w>=0&&w<=6&&(T===0||T===6)||T>=0&&T<=6&&(w===0||w===6)||w>=2&&w<=4&&T>=2&&T<=4?c.set(y+w,v+T,!0,!0):c.set(y+w,v+T,!1,!0))}}function B(c){const f=c.size;for(let m=8;m<f-8;m++){const h=m%2===0;c.set(m,6,h,!0),c.set(6,m,h,!0)}}function I(c,f){const m=n.getPositions(f);for(let h=0;h<m.length;h++){const _=m[h][0],y=m[h][1];for(let v=-2;v<=2;v++)for(let w=-2;w<=2;w++)v===-2||v===2||w===-2||w===2||v===0&&w===0?c.set(_+v,y+w,!0,!0):c.set(_+v,y+w,!1,!0)}}function N(c,f){const m=c.size,h=u.getEncodedBits(f);let _,y,v;for(let w=0;w<18;w++)_=Math.floor(w/3),y=w%3+m-8-3,v=(h>>w&1)===1,c.set(_,y,v,!0),c.set(y,_,v,!0)}function C(c,f,m){const h=c.size,_=d.getEncodedBits(f,m);let y,v;for(y=0;y<15;y++)v=(_>>y&1)===1,y<6?c.set(y,8,v,!0):y<8?c.set(y+1,8,v,!0):c.set(h-15+y,8,v,!0),y<8?c.set(8,h-y-1,v,!0):y<9?c.set(8,15-y-1+1,v,!0):c.set(8,15-y-1,v,!0);c.set(h-8,8,1,!0)}function P(c,f){const m=c.size;let h=-1,_=m-1,y=7,v=0;for(let w=m-1;w>0;w-=2)for(w===6&&w--;;){for(let T=0;T<2;T++)if(!c.isReserved(_,w-T)){let V=!1;v<f.length&&(V=(f[v]>>>y&1)===1),c.set(_,w-T,V),y--,y===-1&&(v++,y=7)}if(_+=h,_<0||m<=_){_-=h,h=-h;break}}}function S(c,f,m){const h=new i;m.forEach(function(T){h.put(T.mode.bit,4),h.put(T.getLength(),E.getCharCountIndicator(T.mode,c)),T.write(h)});const _=t.getSymbolTotalCodewords(c),y=l.getTotalCodewordsCount(c,f),v=(_-y)*8;for(h.getLengthInBits()+4<=v&&h.put(0,4);h.getLengthInBits()%8!==0;)h.putBit(0);const w=(v-h.getLengthInBits())/8;for(let T=0;T<w;T++)h.put(T%2?17:236,8);return b(h,c,f)}function b(c,f,m){const h=t.getSymbolTotalCodewords(f),_=l.getTotalCodewordsCount(f,m),y=h-_,v=l.getBlocksCount(f,m),w=h%v,T=v-w,V=Math.floor(h/v),K=Math.floor(y/v),qt=K+1,je=V-K,Ft=new s(je);let ce=0;const oe=new Array(v),xe=new Array(v);let de=0;const Ut=new Uint8Array(c.buffer);for(let Z=0;Z<v;Z++){const ge=Z<T?K:qt;oe[Z]=Ut.slice(ce,ce+ge),xe[Z]=Ft.encode(oe[Z]),ce+=ge,de=Math.max(de,ge)}const fe=new Uint8Array(h);let Ke=0,H,z;for(H=0;H<de;H++)for(z=0;z<v;z++)H<oe[z].length&&(fe[Ke++]=oe[z][H]);for(H=0;H<je;H++)for(z=0;z<v;z++)fe[Ke++]=xe[z][H];return fe}function R(c,f,m,h){let _;if(Array.isArray(c))_=p.fromArray(c);else if(typeof c=="string"){let V=f;if(!V){const K=p.rawSplit(c);V=u.getBestVersionForData(K,m)}_=p.fromString(c,V||40)}else throw new Error("Invalid data");const y=u.getBestVersionForData(_,m);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!f)f=y;else if(f<y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+y+`.
`);const v=S(f,m,_),w=t.getSymbolSize(f),T=new e(w);return g(T,f),B(T),I(T,f),C(T,m,0),f>=7&&N(T,f),P(T,v),isNaN(h)&&(h=a.getBestMask(T,C.bind(null,T,m))),a.applyMask(h,T),C(T,m,h),{modules:T,version:f,errorCorrectionLevel:m,maskPattern:h,segments:_}}return _e.create=function(f,m){if(typeof f>"u"||f==="")throw new Error("No input text");let h=r.M,_,y;return typeof m<"u"&&(h=r.from(m.errorCorrectionLevel,r.M),_=u.from(m.version),y=a.from(m.maskPattern),m.toSJISFunc&&t.setToSJISFunction(m.toSJISFunc)),R(f,_,h,y)},_e}var Le={},qe={},vt;function Dt(){return vt||(vt=1,function(t){function r(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let e=i.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+i);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(o){return[o,o]}))),e.length===6&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const n=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:o,scale:o?4:a,margin:n,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,n){return n.width&&n.width>=e+n.margin*2?n.width/(e+n.margin*2):n.scale},t.getImageWidth=function(e,n){const o=t.getScale(e,n);return Math.floor((e+n.margin*2)*o)},t.qrToImageData=function(e,n,o){const a=n.modules.size,l=n.modules.data,s=t.getScale(a,o),u=Math.floor((a+o.margin*2)*s),d=o.margin*s,E=[o.color.light,o.color.dark];for(let p=0;p<u;p++)for(let g=0;g<u;g++){let B=(p*u+g)*4,I=o.color.light;if(p>=d&&g>=d&&p<u-d&&g<u-d){const N=Math.floor((p-d)/s),C=Math.floor((g-d)/s);I=E[l[N*a+C]?1:0]}e[B++]=I.r,e[B++]=I.g,e[B++]=I.b,e[B]=I.a}}}(qe)),qe}var Ct;function lr(){return Ct||(Ct=1,function(t){const r=Dt();function i(n,o,a){n.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,a,l){let s=l,u=a;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),a||(u=e()),s=r.getOptions(s);const d=r.getImageWidth(o.modules.size,s),E=u.getContext("2d"),p=E.createImageData(d,d);return r.qrToImageData(p.data,o,s),i(E,u,d),E.putImageData(p,0,0),u},t.renderToDataURL=function(o,a,l){let s=l;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),s||(s={});const u=t.render(o,a,s),d=s.type||"image/png",E=s.rendererOpts||{};return u.toDataURL(d,E.quality)}}(Le)),Le}var Fe={},Et;function ur(){if(Et)return Fe;Et=1;const t=Dt();function r(n,o){const a=n.a/255,l=o+'="'+n.hex+'"';return a<1?l+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':l}function i(n,o,a){let l=n+o;return typeof a<"u"&&(l+=" "+a),l}function e(n,o,a){let l="",s=0,u=!1,d=0;for(let E=0;E<n.length;E++){const p=Math.floor(E%o),g=Math.floor(E/o);!p&&!u&&(u=!0),n[E]?(d++,E>0&&p>0&&n[E-1]||(l+=u?i("M",p+a,.5+g+a):i("m",s,0),s=0,u=!1),p+1<o&&n[E+1]||(l+=i("h",d),d=0)):s++}return l}return Fe.render=function(o,a,l){const s=t.getOptions(a),u=o.modules.size,d=o.modules.data,E=u+s.margin*2,p=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",g="<path "+r(s.color.dark,"stroke")+' d="'+e(d,u,s.margin)+'"/>',B='viewBox="0 0 '+E+" "+E+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+B+' shape-rendering="crispEdges">'+p+g+`</svg>
`;return typeof l=="function"&&l(null,N),N},Fe}var bt;function cr(){if(bt)return ee;bt=1;const t=jn(),r=sr(),i=lr(),e=ur();function n(o,a,l,s,u){const d=[].slice.call(arguments,1),E=d.length,p=typeof d[E-1]=="function";if(!p&&!t())throw new Error("Callback required as last argument");if(p){if(E<2)throw new Error("Too few arguments provided");E===2?(u=l,l=a,a=s=void 0):E===3&&(a.getContext&&typeof u>"u"?(u=s,s=void 0):(u=s,s=l,l=a,a=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(l=a,a=s=void 0):E===2&&!a.getContext&&(s=l,l=a,a=void 0),new Promise(function(g,B){try{const I=r.create(l,s);g(o(I,a,s))}catch(I){B(I)}})}try{const g=r.create(l,s);u(null,o(g,a,s))}catch(g){u(g)}}return ee.create=r.create,ee.toCanvas=n.bind(null,i.render),ee.toDataURL=n.bind(null,i.renderToDataURL),ee.toString=n.bind(null,function(o,a,l){return e.render(o,l)}),ee}var dr=cr();const fr=tn(dr);var gr=Object.defineProperty,hr=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,St=(t,r,i)=>r in t?gr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,_r=(t,r)=>{for(var i in r||(r={}))kt.call(r,i)&&St(t,i,r[i]);if(le)for(var i of le(r))Lt.call(r,i)&&St(t,i,r[i]);return t},wr=(t,r)=>hr(t,mr(r)),yr=(t,r)=>{var i={};for(var e in t)kt.call(t,e)&&r.indexOf(e)<0&&(i[e]=t[e]);if(t!=null&&le)for(var e of le(t))r.indexOf(e)<0&&Lt.call(t,e)&&(i[e]=t[e]);return i};const pr=["low","medium","quartile","high","L","M","Q","H"],vr=[0,1,2,3,4,5,6,7],Cr=["alphanumeric","numeric","kanji","byte"],Er=["image/png","image/jpeg","image/webp"],br=40;var Sr=j({props:{version:{type:Number,validator:t=>t===Number.parseInt(String(t),10)&&t>=1&&t<=br},errorCorrectionLevel:{type:String,validator:t=>pr.includes(t)},maskPattern:{type:Number,validator:t=>vr.includes(t)},toSJISFunc:Function,margin:Number,scale:Number,width:Number,color:{type:Object,validator:t=>["dark","light"].every(r=>["string","undefined"].includes(typeof t[r])),required:!0},type:{type:String,validator:t=>Er.includes(t),required:!0},quality:{type:Number,validator:t=>t===Number.parseFloat(String(t))&&t>=0&&t<=1,required:!1},value:{type:[String,Array],required:!0,validator(t){return typeof t=="string"?!0:t.every(r=>typeof r.data=="string"&&"mode"in r&&r.mode&&Cr.includes(r.mode))}}},setup(t,{attrs:r,emit:i}){const e=Y();return Oe(t,()=>{const o=t,{quality:a,value:l}=o,s=yr(o,["quality","value"]);fr.toDataURL(l,Object.assign(s,a==null||{renderOptions:{quality:a}})).then(u=>{e.value=u,i("change",u)}).catch(u=>i("error",u))},{immediate:!0}),()=>q("img",wr(_r({},r),{src:e.value}))}});const Br=j({__name:"PageQrCode",props:{url:{}},setup(t,{expose:r}){r();const i={get VueQrcode(){return Sr}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function Ir(t,r,i,e,n,o){return A(),D(e.VueQrcode,{type:"image/png",tag:"svg",margin:2,width:200,"error-correction-level":"low",color:{dark:"#111111",light:"#EEEEEE"},value:i.url},null,8,["value"])}const Tr=x(Br,[["render",Ir],["__file","PageQrCode.vue"]]),Pr=j({__name:"PageSingleView",props:{item:{}},setup(t,{expose:r}){r();const i={MediaItemPreviewViewer:At};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function Ar(t,r,i,e,n,o){return A(),D(He,{class:"column no-wrap flex-center full-height q-pa-sm"},{default:k(()=>[M(e.MediaItemPreviewViewer,{item:i.item},null,8,["item"])]),_:1})}const Nr=x(Pr,[["render",Ar],["__file","PageSingleView.vue"]]),Mr=Qe({name:"QCarouselSlide",props:{...Qt,imgSrc:String},setup(t,{slots:r}){const i=F(()=>t.imgSrc?{backgroundImage:`url("${t.imgSrc}")`}:{});return()=>q("div",{class:"q-carousel__slide",style:i.value},nn(r.default))}}),Rr=["top","right","bottom","left"],Dr=["regular","flat","outline","push","unelevated"],kr=Qe({name:"QCarousel",props:{...rn,...Ht,...yn,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:t=>Dr.includes(t),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:t=>Rr.includes(t)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...pn,...zt],setup(t,{slots:r}){const{proxy:{$q:i}}=sn(),e=on(t,i);let n=null,o;const{updatePanelsList:a,getPanelContent:l,panelDirectives:s,goToPanel:u,previousPanel:d,nextPanel:E,getEnabledPanels:p,panelIndex:g}=jt(),{inFullscreen:B}=vn(),I=F(()=>B.value!==!0&&t.height!==void 0?{height:t.height}:{}),N=F(()=>t.vertical===!0?"vertical":"horizontal"),C=F(()=>t.navigationPosition||(t.vertical===!0?"right":"bottom")),P=F(()=>`q-carousel q-panel-parent q-carousel--with${t.padding===!0?"":"out"}-padding`+(B.value===!0?" fullscreen":"")+(e.value===!0?" q-carousel--dark q-dark":"")+(t.arrows===!0?` q-carousel--arrows-${N.value}`:"")+(t.navigation===!0?` q-carousel--navigation-${C.value}`:"")),S=F(()=>{const _=[t.prevIcon||i.iconSet.carousel[t.vertical===!0?"up":"left"],t.nextIcon||i.iconSet.carousel[t.vertical===!0?"down":"right"]];return t.vertical===!1&&i.lang.rtl===!0?_.reverse():_}),b=F(()=>t.navigationIcon||i.iconSet.carousel.navigationIcon),R=F(()=>t.navigationActiveIcon||b.value),c=F(()=>({color:t.controlColor,textColor:t.controlTextColor,round:!0,[t.controlType]:!0,dense:!0}));Oe(()=>t.modelValue,()=>{t.autoplay&&f()}),Oe(()=>t.autoplay,_=>{_?f():n!==null&&(clearTimeout(n),n=null)});function f(){const _=Bt(t.autoplay)===!0?Math.abs(t.autoplay):5e3;n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,_>=0?E():d()},_)}ue(()=>{t.autoplay&&f()}),Tt(()=>{n!==null&&clearTimeout(n)});function m(_,y){return q("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${_} q-carousel__navigation--${C.value}`+(t.controlColor!==void 0?` text-${t.controlColor}`:"")},[q("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},p().map(y))])}function h(){const _=[];if(t.navigation===!0){const y=r["navigation-icon"]!==void 0?r["navigation-icon"]:w=>q(O,{key:"nav"+w.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${w.active===!0?"":"in"}active`,...w.btnProps,onClick:w.onClick}),v=o-1;_.push(m("buttons",(w,T)=>{const V=w.props.name,K=g.value===T;return y({index:T,maxIndex:v,name:V,active:K,btnProps:{icon:K===!0?R.value:b.value,size:"sm",...c.value},onClick:()=>{u(V)}})}))}else if(t.thumbnails===!0){const y=t.controlColor!==void 0?` text-${t.controlColor}`:"";_.push(m("thumbnails",v=>{const w=v.props;return q("img",{key:"tmb#"+w.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${w.name===t.modelValue?"":"in"}active`+y,src:w.imgSrc||w["img-src"],onClick:()=>{u(w.name)}})}))}return t.arrows===!0&&g.value>=0&&((t.infinite===!0||g.value>0)&&_.push(q("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${N.value} absolute flex flex-center`},[q(O,{icon:S.value[0],...c.value,onClick:d})])),(t.infinite===!0||g.value<o-1)&&_.push(q("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${N.value} absolute flex flex-center`},[q(O,{icon:S.value[1],...c.value,onClick:E})]))),ln(r.control,_)}return()=>(o=a(r),q("div",{class:P.value,style:I.value},[an("div",{class:"q-carousel__slides-container"},l(),"sl-cont",t.swipeable,()=>s.value)].concat(h())))}}),Lr=j({__name:"PageCarouselView",props:{slicedImages:{},initialSlideId:{}},emits:["triggerChangedItem"],setup(t,{expose:r,emit:i}){r();const e=Y(""),n=t;ue(()=>{e.value=n.initialSlideId});const o=i;function a(){console.log("TODO: add method to close dialog programmatically")}function l(u){o("triggerChangedItem",u)}const s={currentSlideId:e,props:n,emit:o,handleSwipeDown:a,carouselTransition:l,MediaItemPreviewViewer:At};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function qr(t,r,i,e,n,o){return Ve((A(),D(kr,{modelValue:e.currentSlideId,"onUpdate:modelValue":r[0]||(r[0]=a=>e.currentSlideId=a),class:"",style:{width:"100%",height:"100%"},"control-type":"flat","control-color":"primary",swipeable:"",animated:"",draggable:"false",infinite:!0,"transition-prev":"slide-right","transition-next":"slide-left",onTransition:e.carouselTransition},{default:k(()=>[(A(!0),U(te,null,ae(e.props.slicedImages,a=>(A(),D(Mr,{key:a.id,name:a.id,class:"column no-wrap flex-center full-height q-pa-sm"},{default:k(()=>[M(e.MediaItemPreviewViewer,{item:a},null,8,["item"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])),[[xt,e.handleSwipeDown,void 0,{mouse:!0,down:!0}]])}const Fr=x(Lr,[["render",qr],["__file","PageCarouselView.vue"]]),Ur=j({__name:"GalleryDetailPage",props:{startTimer:Boolean},setup(t,{expose:r}){r();const i=Cn(),e=un(),n=cn(),o=dn(),a=Y(""),l=Y(!1),s=Y(!1),u=Y(!1),d=t;fn(()=>{a.value=e.params.id}),ue(()=>{s.value=d.startTimer});const E=c=>{a.value=c},p=F(()=>I(a.value)),g=F(()=>n.getConfigElement("uisettings.gallery_show_filter",!1)&&N(p.value.media_type)),B=F(()=>{const c=[];return n.getConfigElement("share.actions",[]).forEach((m,h)=>{const _={config_index:h,handles_images_only:re.get(m,"action.handles_images_only",!1),show_button:re.get(m,"trigger.ui_trigger.show_button",!1),title:re.get(m,"trigger.ui_trigger.title",""),icon:re.get(m,"trigger.ui_trigger.icon","")};c.push(_)}),console.log(c),c}),I=c=>o.collection.find(f=>f.id==c),N=c=>["image","collageimage","animationimage"].includes(c),C=async c=>{await fetch(c,{cache:"reload",mode:"no-cors"});const f=new Date().getTime();document.body.querySelectorAll(`img[src*='${c}']`).forEach(m=>{m.src=c+"#"+f})},R={$q:i,route:e,configurationStore:n,mediacollectionStore:o,selectedMediaitemId:a,rightDrawerOpen:l,headercountdowntimer:s,displayIndeterminateProgressbar:u,props:d,onCarouselTransition:E,currentMediaitem:p,showFilter:g,shareButtons:B,getMediaitemById:I,getFilterAvailable:N,reloadImg:C,doApplyFilter:(c,f)=>{u.value=!0,fetch(`/api/mediaprocessing/applyfilter/${c}/${f}`).then(m=>{if(!m.ok)throw new Error("Server returned "+m.status);const h=I(c);C(h.full),C(h.preview),C(h.thumbnail),u.value=!1}).catch(m=>{console.error(m),u.value=!1})},doDeleteItem:c=>{a.value=void 0,fetch("/api/mediacollection/delete",{method:"POST",body:JSON.stringify({image_id:c}),headers:{"Content-Type":"application/json"}}).then(f=>{if(!f.ok)throw new Error("Server returned "+f.status)}).then(f=>{console.log(f)}).catch(f=>{console.error("There was a problem with the Fetch operation:",f),i.notify({message:"Error deleting file! Please check logs and browser console.",type:"negative"})})},doShareAction:c=>{console.log(a.value,c),gn(`/api/share/actions/${a.value}/${c}`)},HeaderToolbar:Rn,HeaderCountdownTimer:Ln,HeaderProcessing:Un,DrawerFilter:zn,PageQrCode:Tr,PageSingleView:Nr,PageCarouselView:Fr,ItemNotAvailableError:wn};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),Vr={key:0};const Or={key:1,class:"full-height"},Qr={key:1};function Hr(t,r,i,e,n,o){return A(),D(Gt,{view:"hhh Lpr ffr",onclick:"headercountdowntimer=false"},{default:k(()=>[e.currentMediaitem?(A(),U("div",Vr,[M(Ot,{class:"bg-primary text-white"},{default:k(()=>[M(e.HeaderToolbar,{item:e.currentMediaitem,"show-filter":e.configurationStore.getConfigElement("uisettings.gallery_show_filter",!1),"enable-filter":["image","collage","collageimage","animationimage"].includes(e.currentMediaitem.media_type),"show-share":e.configurationStore.getConfigElement("share.sharing_enabled",!1),"share-direct-access-buttons":e.configurationStore.getConfigElement("share.number_direct_access_buttons",1),"share-buttons":e.shareButtons,"show-delete":e.configurationStore.getConfigElement("uisettings.gallery_show_delete",!1),"show-download":e.configurationStore.getConfigElement("uisettings.gallery_show_download",!1),onTriggerToggleDisplayFilter:r[0]||(r[0]=a=>e.rightDrawerOpen=!e.rightDrawerOpen),onTriggerDeleteMediaitem:r[1]||(r[1]=a=>[e.doDeleteItem,t.$router.back()]),onTriggerShareAction:e.doShareAction},null,8,["item","show-filter","enable-filter","show-share","share-direct-access-buttons","share-buttons","show-delete","show-download"]),e.headercountdowntimer?(A(),D(e.HeaderCountdownTimer,{key:0,duration:e.configurationStore.getConfigElement("uisettings.AUTOCLOSE_NEW_ITEM_ARRIVED",0),onTriggerTimeout:r[2]||(r[2]=a=>t.$router.push({path:"/"}))},null,8,["duration"])):L("",!0),e.displayIndeterminateProgressbar?(A(),D(e.HeaderProcessing,{key:1})):L("",!0)]),_:1}),e.showFilter?(A(),D(Kt,{key:0,id:"gallery-drawer-filters",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":r[3]||(r[3]=a=>e.rightDrawerOpen=a),class:"q-pa-sm",side:"right",overlay:"",elevated:""},{default:k(()=>[M(e.DrawerFilter,{id:e.currentMediaitem.id,"available-filter":e.configurationStore.getConfigElement("uisettings.gallery_filter_userselectable",[]),onTriggerApplyFilter:e.doApplyFilter},null,8,["id","available-filter"])]),_:1},8,["modelValue"])):L("",!0),M(Yt,{class:"q-pa-none galleryimagedetail full-height"},{default:k(()=>[(A(),U("div",Or,[M(e.PageCarouselView,{initialSlideId:e.currentMediaitem.id,"sliced-images":e.mediacollectionStore.collection,onTriggerChangedItem:e.onCarouselTransition},null,8,["initialSlideId","sliced-images"])])),e.configurationStore.getConfigElement("uisettings.gallery_show_qrcode",!1)?(A(),D(Jt,{key:2,position:"top-right",offset:[30,30]},{default:k(()=>[M(e.PageQrCode,{url:e.currentMediaitem.share_url},null,8,["url"])]),_:1})):L("",!0)]),_:1})])):(A(),U("div",Qr,[M(e.ItemNotAvailableError)]))]),_:1})}const ro=x(Ur,[["render",Hr],["__scopeId","data-v-1b6bff91"],["__file","GalleryDetailPage.vue"]]);export{ro as default};
