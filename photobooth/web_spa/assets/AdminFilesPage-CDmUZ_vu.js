import{n as ne,ag as Nt,ah as Dt,c as b,s,Q as oe,a4 as it,au as jt,av as It,aw as Qt,K as Ce,P as A,L as Fe,am as st,aa as ut,ax as Vt,I as ct,J as dt,a9 as Mt,a6 as Ht,ay as $t,w as ie,o as ft,ao as Wt,az as ge,aA as vt,aB as Je,D as H,aC as gt,aD as Kt,aE as Gt,aF as Zt,aG as Xe,a5 as Jt,a2 as mt,a8 as Xt,a7 as Yt,X as Me,aH as Ye,ab as bt,aI as el,aJ as pe,_ as tl,e as he,j as Le,k as N,x as fe,l as T,f as ll,F as al,B as ol,y as nl,z as ye,a1 as je,U as Ie,Y as Se,aK as rl,$ as Qe,t as we,a0 as qe,Z as il}from"./index-DyBYTJ4X.js";import{Q as et}from"./QInput-But9oDY8.js";import{Q as sl}from"./QCircularProgress-DCqy4ls7.js";import{h as tt}from"./format-CJebrXOQ.js";import{Q as ul}from"./QSeparator-Cbn6xp42.js";import{Q as cl}from"./QList-SqnOpE0e.js";import{Q as dl}from"./QMarkupTable-7gqi-ee1.js";import{u as fl,a as vl,c as _t,Q as gl}from"./QSelect-BCdJ9jeu.js";import{Q as ml}from"./QLinearProgress-jENmI5Eb.js";import{u as bl,a as _l,b as pl}from"./use-checkbox-BVsHF5xq.js";import{u as hl,a as yl,b as Sl}from"./use-fullscreen-BDYZXnXo.js";import{Q as wl}from"./QPage-Df3VR9X2.js";import{u as ql}from"./use-quasar-C9megnz2.js";import"./use-key-composition-wh9iFZse.js";import"./use-id-B2RNRfHe.js";import"./QItem-CCvttBPS.js";import"./QMenu-Bf_79urT.js";import"./rtl-DFPa-2ov.js";const lt=ne({name:"QBreadcrumbsEl",props:{...Nt,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:n,linkAttrs:l,linkClass:i,navigateOnClick:c}=Dt(),r=b(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+i.value:"q-breadcrumbs__el--disable"),...l.value,onClick:c})),v=b(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const g=[];return e.icon!==void 0&&g.push(s(oe,{class:v.value,name:e.icon})),e.label!==void 0&&g.push(e.label),s(n.value,{...r.value},it(t.default,g))}}}),Cl=["",!0],Fl=ne({name:"QBreadcrumbs",props:{...jt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const n=It(e),l=b(()=>`flex items-center ${n.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),i=b(()=>e.separatorColor?` text-${e.separatorColor}`:""),c=b(()=>` text-${e.activeColor}`);return()=>{if(t.default===void 0)return;const r=Qt(Ce(t.default));if(r.length===0)return;let v=1;const g=[],q=r.filter(p=>p.type!==void 0&&p.type.name==="QBreadcrumbsEl").length,u=t.separator!==void 0?t.separator:()=>e.separator;return r.forEach(p=>{if(p.type!==void 0&&p.type.name==="QBreadcrumbsEl"){const P=v<q,x=p.props!==null&&Cl.includes(p.props.disable),o=(P===!0?"":" q-breadcrumbs--last")+(x!==!0&&P===!0?c.value:"");v++,g.push(s("div",{class:`flex items-center${o}`},[p])),P===!0&&g.push(s("div",{class:"q-breadcrumbs__separator"+i.value},u()))}else g.push(p)}),s("div",{class:"q-breadcrumbs"},[s("div",{class:l.value},g)])}}});function ve(e,t,n,l){const i=[];return e.forEach(c=>{l(c)===!0?i.push(c):t.push({failedPropValidation:n,file:c})}),i}function Re(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ut(e)}const kl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Pl=["rejected"];function xl({editable:e,dnd:t,getFileInput:n,addFilesToQueue:l}){const{props:i,emit:c,proxy:r}=Fe(),v=A(null),g=b(()=>i.accept!==void 0?i.accept.split(",").map(d=>(d=d.trim(),d==="*"?"*/":(d.endsWith("/*")&&(d=d.slice(0,d.length-1)),d.toUpperCase()))):null),q=b(()=>parseInt(i.maxFiles,10)),u=b(()=>parseInt(i.maxTotalSize,10));function p(d){if(e.value)if(d!==Object(d)&&(d={target:null}),d.target!==null&&d.target.matches('input[type="file"]')===!0)d.clientX===0&&d.clientY===0&&st(d);else{const z=n();z&&z!==d.target&&z.click(d)}}function P(d){e.value&&d&&l(null,d)}function x(d,z,S,_){let w=Array.from(z||d.target.files);const U=[],M=()=>{U.length!==0&&c("rejected",U)};if(i.accept!==void 0&&g.value.indexOf("*/")===-1&&(w=ve(w,U,"accept",R=>g.value.some(O=>R.type.toUpperCase().startsWith(O)||R.name.toUpperCase().endsWith(O))),w.length===0))return M();if(i.maxFileSize!==void 0){const R=parseInt(i.maxFileSize,10);if(w=ve(w,U,"max-file-size",O=>O.size<=R),w.length===0)return M()}if(i.multiple!==!0&&w.length!==0&&(w=[w[0]]),w.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),_===!0){const R=S.map(O=>O.__key);w=ve(w,U,"duplicate",O=>R.includes(O.__key)===!1)}if(w.length===0)return M();if(i.maxTotalSize!==void 0){let R=_===!0?S.reduce((O,V)=>O+V.size,0):0;if(w=ve(w,U,"max-total-size",O=>(R+=O.size,R<=u.value)),w.length===0)return M()}if(typeof i.filter=="function"){const R=i.filter(w);w=ve(w,U,"filter",O=>R.includes(O))}if(i.maxFiles!==void 0){let R=_===!0?S.length:0;if(w=ve(w,U,"max-files",()=>(R++,R<=q.value)),w.length===0)return M()}if(M(),w.length!==0)return w}function o(d){Re(d),t.value!==!0&&(t.value=!0)}function h(d){ut(d),(d.relatedTarget!==null||Vt.is.safari!==!0?d.relatedTarget!==v.value:document.elementsFromPoint(d.clientX,d.clientY).includes(v.value)===!1)===!0&&(t.value=!1)}function y(d){Re(d);const z=d.dataTransfer.files;z.length!==0&&l(null,z),t.value=!1}function F(d){if(t.value===!0)return s("div",{ref:v,class:`q-${d}__dnd absolute-full`,onDragenter:Re,onDragover:Re,onDragleave:h,onDrop:y})}return Object.assign(r,{pickFiles:p,addFiles:P}),{pickFiles:p,addFiles:P,onDragover:o,onDragleave:h,processFiles:x,getDndNode:F,maxFilesNumber:q,maxTotalSizeNumber:u}}function at(e){return(e*100).toFixed(2)+"%"}const Bl={...ct,...kl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},pt=[...Pl,"start","finish","added","removed"];function Tl(e,t){const n=Fe(),{props:l,slots:i,emit:c,proxy:r}=n,{$q:v}=r,g=dt(l,v);function q(f,L,I){if(f.__status=L,L==="idle"){f.__uploaded=0,f.__progress=0,f.__sizeLabel=tt(f.size),f.__progressLabel="0.00%";return}if(L==="failed"){r.$forceUpdate();return}f.__uploaded=L==="uploaded"?f.size:I,f.__progress=L==="uploaded"?1:Math.min(.9999,f.__uploaded/f.size),f.__progressLabel=at(f.__progress),r.$forceUpdate()}const u=b(()=>l.disable!==!0&&l.readonly!==!0),p=A(!1),P=A(null),x=A(null),o={files:A([]),queuedFiles:A([]),uploadedFiles:A([]),uploadedSize:A(0),updateFileStatus:q,isAlive:()=>Mt(n)===!1},{pickFiles:h,addFiles:y,onDragover:F,onDragleave:d,processFiles:z,getDndNode:S,maxFilesNumber:_,maxTotalSizeNumber:w}=xl({editable:u,dnd:p,getFileInput:K,addFilesToQueue:me});Object.assign(o,e({props:l,slots:i,emit:c,helpers:o,exposeApi:f=>{Object.assign(o,f)}})),o.isBusy===void 0&&(o.isBusy=A(!1));const U=A(0),M=b(()=>U.value===0?0:o.uploadedSize.value/U.value),R=b(()=>at(M.value)),O=b(()=>tt(U.value)),V=b(()=>u.value===!0&&o.isUploading.value!==!0&&(l.multiple===!0||o.queuedFiles.value.length===0)&&(l.maxFiles===void 0||o.files.value.length<_.value)&&(l.maxTotalSize===void 0||U.value<w.value)),E=b(()=>u.value===!0&&o.isBusy.value!==!0&&o.isUploading.value!==!0&&o.queuedFiles.value.length!==0);Ht($t,xe);const J=b(()=>"q-uploader column no-wrap"+(g.value===!0?" q-uploader--dark q-dark":"")+(l.bordered===!0?" q-uploader--bordered":"")+(l.square===!0?" q-uploader--square no-border-radius":"")+(l.flat===!0?" q-uploader--flat no-shadow":"")+(l.disable===!0?" disabled q-uploader--disable":"")+(p.value===!0?" q-uploader--dnd":"")),te=b(()=>"q-uploader__header"+(l.color!==void 0?` bg-${l.color}`:"")+(l.textColor!==void 0?` text-${l.textColor}`:""));ie(o.isUploading,(f,L)=>{L===!1&&f===!0?c("start"):L===!0&&f===!1&&c("finish")});function X(){l.disable===!1&&(o.abort(),o.uploadedSize.value=0,U.value=0,Pe(),o.files.value=[],o.queuedFiles.value=[],o.uploadedFiles.value=[])}function $(){l.disable===!1&&ke(["uploaded"],()=>{o.uploadedFiles.value=[]})}function le(){ke(["idle","failed"],({size:f})=>{U.value-=f,o.queuedFiles.value=[]})}function ke(f,L){if(l.disable===!0)return;const I={files:[],size:0},Z=o.files.value.filter(Q=>f.indexOf(Q.__status)===-1?!0:(I.size+=Q.size,I.files.push(Q),Q.__img!==void 0&&window.URL.revokeObjectURL(Q.__img.src),!1));I.files.length!==0&&(o.files.value=Z,L(I),c("removed",I.files))}function ae(f){l.disable||(f.__status==="uploaded"?o.uploadedFiles.value=o.uploadedFiles.value.filter(L=>L.__key!==f.__key):f.__status==="uploading"?f.__abort():U.value-=f.size,o.files.value=o.files.value.filter(L=>L.__key!==f.__key?!0:(L.__img!==void 0&&window.URL.revokeObjectURL(L.__img.src),!1)),o.queuedFiles.value=o.queuedFiles.value.filter(L=>L.__key!==f.__key),c("removed",[f]))}function Pe(){o.files.value.forEach(f=>{f.__img!==void 0&&window.URL.revokeObjectURL(f.__img.src)})}function K(){return x.value||P.value.getElementsByClassName("q-uploader__input")[0]}function me(f,L){const I=z(f,L,o.files.value,!0),Z=K();Z!=null&&(Z.value=""),I!==void 0&&(I.forEach(Q=>{if(o.updateFileStatus(Q,"idle"),U.value+=Q.size,l.noThumbnails!==!0&&Q.type.toUpperCase().startsWith("IMAGE")){const ue=new Image;ue.src=window.URL.createObjectURL(Q),Q.__img=ue}}),o.files.value=o.files.value.concat(I),o.queuedFiles.value=o.queuedFiles.value.concat(I),c("added",I),l.autoUpload===!0&&o.upload())}function be(){E.value===!0&&o.upload()}function re(f,L,I){if(f===!0){const Z={type:"a",key:L,icon:v.iconSet.uploader[L],flat:!0,dense:!0};let Q;return L==="add"?(Z.onClick=h,Q=xe):Z.onClick=I,s(H,Z,Q)}}function xe(){return s("input",{ref:x,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:l.accept,multiple:l.multiple===!0?"multiple":void 0,capture:l.capture,onMousedown:st,onClick:h,onChange:me})}function _e(){return i.header!==void 0?i.header(G):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[re(o.queuedFiles.value.length!==0,"removeQueue",le),re(o.uploadedFiles.value.length!==0,"removeUploaded",$),o.isUploading.value===!0?s(Je,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[l.label!==void 0?s("div",{class:"q-uploader__title"},[l.label]):null,s("div",{class:"q-uploader__subtitle"},[O.value+" / "+R.value])]),re(V.value,"add"),re(l.hideUploadBtn===!1&&E.value===!0,"upload",o.upload),re(o.isUploading.value,"clear",o.abort)])])]}function se(){return i.list!==void 0?i.list(G):o.files.value.map(f=>s("div",{key:f.__key,class:"q-uploader__file relative-position"+(l.noThumbnails!==!0&&f.__img!==void 0?" q-uploader__file--img":"")+(f.__status==="failed"?" q-uploader__file--failed":f.__status==="uploaded"?" q-uploader__file--uploaded":""),style:l.noThumbnails!==!0&&f.__img!==void 0?{backgroundImage:'url("'+f.__img.src+'")',backgroundSize:l.thumbnailFit}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[f.__status==="failed"?s(oe,{class:"q-uploader__file-status",name:v.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[f.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[f.__sizeLabel+" / "+f.__progressLabel])]),f.__status==="uploading"?s(sl,{value:f.__progress,min:0,max:1,indeterminate:f.__progress===0}):s(H,{round:!0,dense:!0,flat:!0,icon:v.iconSet.uploader[f.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(f)}})])]))}ft(()=>{o.isUploading.value===!0&&o.abort(),o.files.value.length!==0&&Pe()});const G={};for(const f in o)Wt(o[f])===!0?ge(G,f,()=>o[f].value):G[f]=o[f];return Object.assign(G,{upload:be,reset:X,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:h,addFiles:y}),vt(G,{canAddFiles:()=>V.value,canUpload:()=>E.value,uploadSizeLabel:()=>O.value,uploadProgressLabel:()=>R.value}),t({...o,upload:be,reset:X,removeUploadedFiles:$,removeQueuedFiles:le,removeFile:ae,pickFiles:h,addFiles:y,canAddFiles:V,canUpload:E,uploadSizeLabel:O,uploadProgressLabel:R}),()=>{const f=[s("div",{class:te.value},_e()),s("div",{class:"q-uploader__list scroll"},se()),S("uploader")];o.isBusy.value===!0&&f.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(Je)]));const L={ref:P,class:J.value};return V.value===!0&&Object.assign(L,{onDragover:F,onDragleave:d}),s("div",L,f)}}const El=()=>!0;function Ll(e){const t={};return e.forEach(n=>{t[n]=El}),t}const Rl=Ll(pt),Ol=({name:e,props:t,emits:n,injectPlugin:l})=>ne({name:e,props:{...Bl,...t},emits:gt(n)===!0?{...Rl,...n}:[...pt,...n],setup(i,{expose:c}){return Tl(l,c)}});function ee(e){return typeof e=="function"?e:()=>e}const zl="QUploader",Ul={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Al=["factoryFailed","uploaded","failed","uploading"];function Nl({props:e,emit:t,helpers:n}){const l=A([]),i=A([]),c=A(0),r=b(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),v=b(()=>c.value>0),g=b(()=>i.value.length!==0);let q;function u(){l.value.forEach(o=>{o.abort()}),i.value.length!==0&&(q=!0)}function p(){const o=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],r.value.batch(o)?P(o):o.forEach(h=>{P([h])})}function P(o){if(c.value++,typeof e.factory!="function"){x(o,{});return}const h=e.factory(o);if(!h)t("factoryFailed",new Error("QUploader: factory() does not return properly"),o),c.value--;else if(typeof h.catch=="function"&&typeof h.then=="function"){i.value.push(h);const y=F=>{n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==h),i.value.length===0&&(q=!1),n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(d=>{n.updateFileStatus(d,"failed")}),t("factoryFailed",F,o),c.value--)};h.then(F=>{q===!0?y(new Error("Aborted")):n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==h),x(o,F))}).catch(y)}else x(o,h||{})}function x(o,h){const y=new FormData,F=new XMLHttpRequest,d=(E,J)=>h[E]!==void 0?ee(h[E])(J):r.value[E](J),z=d("url",o);if(!z){console.error("q-uploader: invalid or no URL specified"),c.value--;return}const S=d("formFields",o);S!==void 0&&S.forEach(E=>{y.append(E.name,E.value)});let _=0,w=0,U=0,M=0,R;F.upload.addEventListener("progress",E=>{if(R===!0)return;const J=Math.min(M,E.loaded);n.uploadedSize.value+=J-U,U=J;let te=U-w;for(let X=_;te>0&&X<o.length;X++){const $=o[X];if(te>$.size)te-=$.size,_++,w+=$.size,n.updateFileStatus($,"uploading",$.size);else{n.updateFileStatus($,"uploading",te);return}}},!1),F.onreadystatechange=()=>{F.readyState<4||(F.status&&F.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"uploaded")}),t("uploaded",{files:o,xhr:F})):(R=!0,n.uploadedSize.value-=U,n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"failed")}),t("failed",{files:o,xhr:F})),c.value--,l.value=l.value.filter(E=>E!==F))},F.open(d("method",o),z),d("withCredentials",o)===!0&&(F.withCredentials=!0);const O=d("headers",o);O!==void 0&&O.forEach(E=>{F.setRequestHeader(E.name,E.value)});const V=d("sendRaw",o);o.forEach(E=>{n.updateFileStatus(E,"uploading",0),V!==!0&&y.append(d("fieldName",E),E,E.name),E.xhr=F,E.__abort=()=>{F.abort()},M+=E.size}),t("uploading",{files:o,xhr:F}),l.value.push(F),V===!0?F.send(new Blob(o)):F.send(y)}return{isUploading:v,isBusy:g,abort:u,upload:p}}const Dl={name:zl,props:Ul,emits:Al,injectPlugin:Nl},jl=Ol(Dl),ot=ne({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=Fe(),l=b(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:l.value},Ce(t.default));const i=n.vnode.key,c=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(c===void 0)return;const{row:r}=e.props;return s("td",{class:l.value+c.__tdClass(r),style:c.__tdStyle(r)},Ce(t.default))}}}),Il=ne({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const l=Fe(),{proxy:{$q:i}}=l,c=r=>{n("click",r)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:c},Ce(t.default));let r,v;const g=l.vnode.key;if(g){if(r=e.props.colsMap[g],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const u=r.align==="right"?"unshift":"push";v=Kt(t.default,[]),v[u](s(oe,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else v=Ce(t.default);const q={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:u=>{r.sortable===!0&&e.props.sort(r),c(u)}};return s("th",q,v)}}});function ht(e,t){return s("div",e,[s("table",{class:"q-table"},t)])}const Ql={list:cl,table:dl},Vl=["list","table","__qtable"],Ml=ne({name:"QVirtualScroll",props:{...fl,type:{type:String,default:"list",validator:e=>Vl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Gt},setup(e,{slots:t,attrs:n}){let l;const i=A(null),c=b(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:v,padVirtualScroll:g,onVirtualScrollEvt:q}=vl({virtualScrollLength:c,getVirtualScrollTarget:o,getVirtualScrollEl:x}),u=b(()=>{if(c.value===0)return[];const d=(z,S)=>({index:r.value.from+S,item:z});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(d):e.itemsFn(r.value.from,r.value.to-r.value.from).map(d)}),p=b(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=b(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ie(c,()=>{v()}),ie(()=>e.scrollTarget,()=>{y(),h()});function x(){return i.value.$el||i.value}function o(){return l}function h(){l=Zt(x(),e.scrollTarget),l.addEventListener("scroll",q,Xe.passive)}function y(){l!==void 0&&(l.removeEventListener("scroll",q,Xe.passive),l=void 0)}function F(){let d=g(e.type==="list"?"div":"tbody",u.value.map(t.default));return t.before!==void 0&&(d=t.before().concat(d)),it(t.after,d)}return Jt(()=>{v()}),mt(()=>{h()}),Xt(()=>{h()}),Yt(()=>{y()}),ft(()=>{y()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ht({ref:i,class:"q-table__middle "+p.value},F()):s(Ql[e.type],{...n,ref:i,class:[n.class,p.value],...P.value},F)}}}),Hl=()=>s("div",{key:"svg",class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ve=ne({name:"QCheckbox",props:bl,emits:_l,setup(e){const t=Hl();function n(l,i){const c=b(()=>(l.value===!0?e.checkedIcon:i.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>c.value!==null?[s("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[s(oe,{class:"q-checkbox__icon",name:c.value})])]:[t]}return pl("checkbox",n)}});function $l(e,t){return new Date(e)-new Date(t)}const Wl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Kl(e,t,n,l){const i=b(()=>{const{sortBy:v}=t.value;return v&&n.value.find(g=>g.name===v)||null}),c=b(()=>e.sortMethod!==void 0?e.sortMethod:(v,g,q)=>{const u=n.value.find(x=>x.name===g);if(u===void 0||u.field===void 0)return v;const p=q===!0?-1:1,P=typeof u.field=="function"?x=>u.field(x):x=>x[u.field];return v.sort((x,o)=>{let h=P(x),y=P(o);return u.rawSort!==void 0?u.rawSort(h,y,x,o)*p:h==null?-1*p:y==null?1*p:u.sort!==void 0?u.sort(h,y,x,o)*p:Me(h)===!0&&Me(y)===!0?(h-y)*p:Ye(h)===!0&&Ye(y)===!0?$l(h,y)*p:typeof h=="boolean"&&typeof y=="boolean"?(h-y)*p:([h,y]=[h,y].map(F=>(F+"").toLocaleString().toLowerCase()),h<y?-1*p:h===y?0:p)})});function r(v){let g=e.columnSortOrder;if(gt(v)===!0)v.sortOrder&&(g=v.sortOrder),v=v.name;else{const p=n.value.find(P=>P.name===v);p!==void 0&&p.sortOrder&&(g=p.sortOrder)}let{sortBy:q,descending:u}=t.value;q!==v?(q=v,u=g==="da"):e.binaryStateSort===!0?u=!u:u===!0?g==="ad"?q=null:u=!1:g==="ad"?u=!0:q=null,l({sortBy:q,descending:u,page:1})}return{columnToSort:i,computedSortMethod:c,sort:r}}const Gl={filter:[String,Object],filterMethod:Function};function Zl(e,t){const n=b(()=>e.filterMethod!==void 0?e.filterMethod:(l,i,c,r)=>{const v=i?i.toLowerCase():"";return l.filter(g=>c.some(q=>{const u=r(q,g)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(v)!==-1}))});return ie(()=>e.filter,()=>{bt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function Jl(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function nt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Xl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Yl(e,t){const{props:n,emit:l}=e,i=A(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),c=b(()=>{const u=n["onUpdate:pagination"]!==void 0?{...i.value,...n.pagination}:i.value;return nt(u)}),r=b(()=>c.value.rowsNumber!==void 0);function v(u){g({pagination:u,filter:n.filter})}function g(u={}){bt(()=>{l("request",{pagination:u.pagination||c.value,filter:u.filter||n.filter,getCellValue:t})})}function q(u,p){const P=nt({...c.value,...u});if(Jl(c.value,P)===!0){r.value===!0&&p===!0&&v(P);return}if(r.value===!0){v(P);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?l("update:pagination",P):i.value=P}return{innerPagination:i,computedPagination:c,isServerSide:r,requestServerInteraction:g,setPagination:q}}function ea(e,t,n,l,i,c){const{props:r,emit:v,proxy:{$q:g}}=e,q=b(()=>l.value===!0?n.value.rowsNumber||0:c.value),u=b(()=>{const{page:S,rowsPerPage:_}=n.value;return(S-1)*_}),p=b(()=>{const{page:S,rowsPerPage:_}=n.value;return S*_}),P=b(()=>n.value.page===1),x=b(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/n.value.rowsPerPage))),o=b(()=>p.value===0?!0:n.value.page>=x.value),h=b(()=>(r.rowsPerPageOptions.includes(t.value.rowsPerPage)?r.rowsPerPageOptions:[t.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(_=>({label:_===0?g.lang.table.allRows:""+_,value:_})));ie(x,(S,_)=>{if(S===_)return;const w=n.value.page;S&&!w?i({page:1}):S<w&&i({page:S})});function y(){i({page:1})}function F(){const{page:S}=n.value;S>1&&i({page:S-1})}function d(){const{page:S,rowsPerPage:_}=n.value;p.value>0&&S*_<q.value&&i({page:S+1})}function z(){i({page:x.value})}return r["onUpdate:pagination"]!==void 0&&v("update:pagination",{...n.value}),{firstRowIndex:u,lastRowIndex:p,isFirstPage:P,isLastPage:o,pagesNumber:x,computedRowsPerPageOptions:h,computedRowsNumber:q,firstPage:y,prevPage:F,nextPage:d,lastPage:z}}const ta={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},la=["update:selected","selection"];function aa(e,t,n,l){const i=b(()=>{const o={};return e.selected.map(l.value).forEach(h=>{o[h]=!0}),o}),c=b(()=>e.selection!=="none"),r=b(()=>e.selection==="single"),v=b(()=>e.selection==="multiple"),g=b(()=>n.value.length!==0&&n.value.every(o=>i.value[l.value(o)]===!0)),q=b(()=>g.value!==!0&&n.value.some(o=>i.value[l.value(o)]===!0)),u=b(()=>e.selected.length);function p(o){return i.value[o]===!0}function P(){t("update:selected",[])}function x(o,h,y,F){t("selection",{rows:h,added:y,keys:o,evt:F});const d=r.value===!0?y===!0?h:[]:y===!0?e.selected.concat(h):e.selected.filter(z=>o.includes(l.value(z))===!1);t("update:selected",d)}return{hasSelectionMode:c,singleSelection:r,multipleSelection:v,allRowsSelected:g,someRowsSelected:q,rowsSelectedNumber:u,isRowSelected:p,clearSelection:P,updateSelection:x}}function rt(e){return Array.isArray(e)?e.slice():[]}const oa={expanded:Array},na=["update:expanded"];function ra(e,t){const n=A(rt(e.expanded));ie(()=>e.expanded,r=>{n.value=rt(r)});function l(r){return n.value.includes(r)}function i(r){e.expanded!==void 0?t("update:expanded",r):n.value=r}function c(r,v){const g=n.value.slice(),q=g.indexOf(r);v===!0?q===-1&&(g.push(r),i(g)):q!==-1&&(g.splice(q,1),i(g))}return{isRowExpanded:l,setExpanded:i,updateExpanded:c}}const ia={visibleColumns:Array};function sa(e,t,n){const l=b(()=>{if(e.columns!==void 0)return e.columns;const v=e.rows[0];return v!==void 0?Object.keys(v).map(g=>({name:g,label:g.toUpperCase(),field:g,align:Me(v[g])?"right":"left",sortable:!0})):[]}),i=b(()=>{const{sortBy:v,descending:g}=t.value;return(e.visibleColumns!==void 0?l.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):l.value).map(u=>{const p=u.align||"right",P=`text-${p}`;return{...u,align:p,__iconClass:`q-table__sort-icon q-table__sort-icon--${p}`,__thClass:P+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===v?` sorted ${g===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>P+" "+u.classes:x=>P+" "+u.classes(x):()=>P}})}),c=b(()=>{const v={};return i.value.forEach(g=>{v[g.name]=g}),v}),r=b(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(n.value===!0?1:0));return{colList:l,computedCols:i,computedColsMap:c,computedColspan:r}}const Oe="q-table__bottom row items-center",yt={};_t.forEach(e=>{yt[e]={}});const ua=ne({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...yt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ct,...hl,...ia,...Gl,...Xl,...oa,...ta,...Wl},emits:["request","virtualScroll",...yl,...na,...la],setup(e,{slots:t,emit:n}){const l=Fe(),{proxy:{$q:i}}=l,c=dt(e,i),{inFullscreen:r,toggleFullscreen:v}=Sl(),g=b(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),q=A(null),u=A(null),p=b(()=>e.grid!==!0&&e.virtualScroll===!0),P=b(()=>" q-table__card"+(c.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=b(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(c.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),o=b(()=>x.value+(e.loading===!0?" q-table--loading":""));ie(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{p.value===!0&&u.value!==null&&u.value.reset()});const{innerPagination:h,computedPagination:y,isServerSide:F,requestServerInteraction:d,setPagination:z}=Yl(l,ce),{computedFilterMethod:S}=Zl(e,z),{isRowExpanded:_,setExpanded:w,updateExpanded:U}=ra(e,n),M=b(()=>{let a=e.rows;if(F.value===!0||a.length===0)return a;const{sortBy:m,descending:C}=y.value;return e.filter&&(a=S.value(a,e.filter,K.value,ce)),re.value!==null&&(a=xe.value(e.rows===a?a.slice():a,m,C)),a}),R=b(()=>M.value.length),O=b(()=>{let a=M.value;if(F.value===!0)return a;const{rowsPerPage:m}=y.value;return m!==0&&(se.value===0&&e.rows!==a?a.length>G.value&&(a=a.slice(0,G.value)):a=a.slice(se.value,G.value)),a}),{hasSelectionMode:V,singleSelection:E,multipleSelection:J,allRowsSelected:te,someRowsSelected:X,rowsSelectedNumber:$,isRowSelected:le,clearSelection:ke,updateSelection:ae}=aa(e,n,O,g),{colList:Pe,computedCols:K,computedColsMap:me,computedColspan:be}=sa(e,y,V),{columnToSort:re,computedSortMethod:xe,sort:_e}=Kl(e,y,Pe,z),{firstRowIndex:se,lastRowIndex:G,isFirstPage:f,isLastPage:L,pagesNumber:I,computedRowsPerPageOptions:Z,computedRowsNumber:Q,firstPage:ue,prevPage:ze,nextPage:Ue,lastPage:Ae}=ea(l,h,y,F,z,R),St=b(()=>O.value.length===0),wt=b(()=>{const a={};return _t.forEach(m=>{a[m]=e[m]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function qt(){p.value===!0&&u.value.reset()}function Ct(){if(e.grid===!0)return Ut();const a=e.hideHeader!==!0?Ge:null;if(p.value===!0){const C=t["top-row"],k=t["bottom-row"],B={default:j=>$e(j.item,t.body,j.index)};if(C!==void 0){const j=s("tbody",C({cols:K.value}));B.before=a===null?()=>j:()=>[a()].concat(j)}else a!==null&&(B.before=a);return k!==void 0&&(B.after=()=>s("tbody",k({cols:K.value}))),s(Ml,{ref:u,class:e.tableClass,style:e.tableStyle,...wt.value,scrollTarget:e.virtualScrollTarget,items:O.value,type:"__qtable",tableColspan:be.value,onVirtualScroll:kt},B)}const m=[Pt()];return a!==null&&m.unshift(a()),ht({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},m)}function Ft(a,m){if(u.value!==null){u.value.scrollTo(a,m);return}a=parseInt(a,10);const C=q.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(C!==null){const k=q.value.querySelector(".q-table__middle.scroll"),B=C.offsetTop-e.virtualScrollStickySizeStart,j=B<k.scrollTop?"decrease":"increase";k.scrollTop=B,n("virtualScroll",{index:a,from:0,to:h.value.rowsPerPage-1,direction:j})}}function kt(a){n("virtualScroll",a)}function He(){return[s(ml,{class:"q-table__linear-progress",color:e.color,dark:c.value,indeterminate:!0,trackColor:"transparent"})]}function $e(a,m,C){const k=g.value(a),B=le(k);if(m!==void 0)return m(We({key:k,row:a,pageIndex:C,__trClass:B?"selected":""}));const j=t["body-cell"],D=K.value.map(W=>{const Te=t[`body-cell-${W.name}`],Ee=Te!==void 0?Te:j;return Ee!==void 0?Ee(xt({key:k,row:a,pageIndex:C,col:W})):s("td",{class:W.__tdClass(a),style:W.__tdStyle(a)},ce(W,a))});if(V.value===!0){const W=t["body-selection"],Te=W!==void 0?W(Bt({key:k,row:a,pageIndex:C})):[s(Ve,{modelValue:B,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(Ee,At)=>{ae([k],[a],Ee,At)}})];D.unshift(s("td",{class:"q-table--col-auto-width"},Te))}const Y={key:k,class:{selected:B}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=W=>{n("rowClick",W,a,C)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=W=>{n("rowDblclick",W,a,C)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=W=>{n("rowContextmenu",W,a,C)}),s("tr",Y,D)}function Pt(){const a=t.body,m=t["top-row"],C=t["bottom-row"];let k=O.value.map((B,j)=>$e(B,a,j));return m!==void 0&&(k=m({cols:K.value}).concat(k)),C!==void 0&&(k=k.concat(C({cols:K.value}))),s("tbody",k)}function We(a){return Ne(a),a.cols=a.cols.map(m=>ge({...m},"value",()=>ce(m,a.row))),a}function xt(a){return Ne(a),ge(a,"value",()=>ce(a.col,a.row)),a}function Bt(a){return Ne(a),a}function Ne(a){Object.assign(a,{cols:K.value,colsMap:me.value,sort:_e,rowIndex:se.value+a.pageIndex,color:e.color,dark:c.value,dense:e.dense}),V.value===!0&&ge(a,"selected",()=>le(a.key),(m,C)=>{ae([a.key],[a.row],m,C)}),ge(a,"expand",()=>_(a.key),m=>{U(a.key,m)})}function ce(a,m){const C=typeof a.field=="function"?a.field(m):m[a.field];return a.format!==void 0?a.format(C,m):C}const de=b(()=>({pagination:y.value,pagesNumber:I.value,isFirstPage:f.value,isLastPage:L.value,firstPage:ue,prevPage:ze,nextPage:Ue,lastPage:Ae,inFullscreen:r.value,toggleFullscreen:v}));function Tt(){const a=t.top,m=t["top-left"],C=t["top-right"],k=t["top-selection"],B=V.value===!0&&k!==void 0&&$.value>0,j="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:j},[a(de.value)]);let D;if(B===!0?D=k(de.value).slice():(D=[],m!==void 0?D.push(s("div",{class:"q-table__control"},[m(de.value)])):e.title&&D.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(D.push(s("div",{class:"q-table__separator col"})),D.push(s("div",{class:"q-table__control"},[C(de.value)]))),D.length!==0)return s("div",{class:j},D)}const Ke=b(()=>X.value===!0?null:te.value);function Ge(){const a=Et();return e.loading===!0&&t.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:be.value},He())])),s("thead",a)}function Et(){const a=t.header,m=t["header-cell"];if(a!==void 0)return a(De({header:!0})).slice();const C=K.value.map(k=>{const B=t[`header-cell-${k.name}`],j=B!==void 0?B:m,D=De({col:k});return j!==void 0?j(D):s(Il,{key:k.name,props:D},()=>k.label)});if(E.value===!0&&e.grid!==!0)C.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(J.value===!0){const k=t["header-selection"],B=k!==void 0?k(De({})):[s(Ve,{color:e.color,modelValue:Ke.value,dark:c.value,dense:e.dense,"onUpdate:modelValue":Ze})];C.unshift(s("th",{class:"q-table--col-auto-width"},B))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function De(a){return Object.assign(a,{cols:K.value,sort:_e,colsMap:me.value,color:e.color,dark:c.value,dense:e.dense}),J.value===!0&&ge(a,"selected",()=>Ke.value,Ze),a}function Ze(a){X.value===!0&&(a=!1),ae(O.value.map(g.value),O.value,a)}const Be=b(()=>{const a=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?a.reverse():a});function Lt(){if(e.hideBottom===!0)return;if(St.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,k=t["no-data"],B=k!==void 0?[k({message:C,icon:i.iconSet.table.warning,filter:e.filter})]:[s(oe,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),C];return s("div",{class:Oe+" q-table__bottom--nodata"},B)}const a=t.bottom;if(a!==void 0)return s("div",{class:Oe},[a(de.value)]);const m=e.hideSelectedBanner!==!0&&V.value===!0&&$.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)($.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Oe+" justify-end"},Ot(m));if(m.length!==0)return s("div",{class:Oe},m)}function Rt(a){z({page:1,rowsPerPage:a.value})}function Ot(a){let m;const{rowsPerPage:C}=y.value,k=e.paginationLabel||i.lang.table.pagination,B=t.pagination,j=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),j===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),s(gl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:Z.value,displayValue:C===0?i.lang.table.allRows:C,dark:c.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Rt})])),B!==void 0)m=B(de.value);else if(m=[s("span",C!==0?{class:"q-table__bottom-item"}:{},[C?k(se.value+1,Math.min(G.value,Q.value),Q.value):k(1,R.value,Q.value)])],C!==0&&I.value>1){const D={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(D.size="sm"),I.value>2&&m.push(s(H,{key:"pgFirst",...D,icon:Be.value[0],disable:f.value,onClick:ue})),m.push(s(H,{key:"pgPrev",...D,icon:Be.value[1],disable:f.value,onClick:ze}),s(H,{key:"pgNext",...D,icon:Be.value[2],disable:L.value,onClick:Ue})),I.value>2&&m.push(s(H,{key:"pgLast",...D,icon:Be.value[3],disable:L.value,onClick:Ae}))}return a.push(s("div",{class:"q-table__control"},m)),a}function zt(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[Ge()])]:e.loading===!0&&t.loading===void 0?He():void 0;return s("div",{class:"q-table__middle"},a)}function Ut(){const a=t.item!==void 0?t.item:m=>{const C=m.cols.map(B=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[B.label]),s("div",{class:"q-table__grid-item-value"},[B.value])]));if(V.value===!0){const B=t["body-selection"],j=B!==void 0?B(m):[s(Ve,{modelValue:m.selected,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(D,Y)=>{ae([m.key],[m.row],D,Y)}})];C.unshift(s("div",{class:"q-table__grid-item-row"},j),s(ul,{dark:c.value}))}const k={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(k.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(k.onClick=B=>{n("RowClick",B,m.row,m.pageIndex)}),e.onRowDblclick!==void 0&&(k.onDblclick=B=>{n("RowDblclick",B,m.row,m.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(m.selected===!0?" q-table__grid-item--selected":"")},[s("div",k,C)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},O.value.map((m,C)=>a(We({key:g.value(m),row:m,pageIndex:C}))))}return Object.assign(l.proxy,{requestServerInteraction:d,setPagination:z,firstPage:ue,prevPage:ze,nextPage:Ue,lastPage:Ae,isRowSelected:le,clearSelection:ke,isRowExpanded:_,setExpanded:w,sort:_e,resetVirtualScroll:qt,scrollTo:Ft,getCellValue:ce}),vt(l.proxy,{filteredSortedRows:()=>M.value,computedRows:()=>O.value,computedRowsNumber:()=>Q.value}),()=>{const a=[Tt()],m={ref:q,class:o.value};return e.grid===!0?a.push(zt()):Object.assign(m,{class:[m.class,e.cardClass],style:e.cardStyle}),a.push(Ct(),Lt()),e.loading===!0&&t.loading!==void 0&&a.push(t.loading()),s("div",m,a)}}});function ca(e,t=2){if(!+e)return"0 Bytes";const n=1024,l=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,c)).toFixed(l))} ${i[c]}`}const da={setup(){const e=ql(),t=A(""),n=A(!1),l=A([]),i=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:S=>ca(S,0)}],c=A([]),r=A(""),v=A(!1),g=A(""),q=A(!1),u=A(!1),p=A({rowsPerPage:0}),P=S=>S.split("/").filter(_=>_!=="").join("/"),x=b(()=>t.value?P(t.value).split("/"):[]),o=S=>{S.is_dir?t.value=S.filepath:pe(`/api/admin/files/file/${S.filepath}`,{}).then(_=>_.blob()).then(_=>window.open(URL.createObjectURL(_)))},h=(S=-1)=>{t.value=x.value.slice(0,S+1).join("/")};async function y(S=""){n.value=!0,c.value=[];try{const _=await pe(`/api/admin/files/list/${S}`,{method:"GET",headers:{"Content-Type":"application/json"}}),w=await _.json();if(_.ok)l.value=w;else throw console.error(w),`Error ${_.status} getting listing. Please check logs.`}catch(_){console.error(_),e.notify({message:String(_),caption:"Request Error!",color:"negative"})}n.value=!1}async function F(S=[]){try{const _=await pe("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(_.ok){e.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});const w=await _.blob(),U=window.URL.createObjectURL(w);window.location.assign(U)}else{const w=await _.json();throw console.error(w),`Error ${_.status} creating zip. Please check logs.`}}catch(_){console.error(_),e.notify({message:String(_),caption:"Request Error!",color:"negative"})}}async function d(S=[]){try{const _=await pe("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(_.ok)e.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else throw console.error(_),`Error ${_.status} deleting items. Please check logs.`}catch(_){console.error(_),e.notify({message:String(_),caption:"Request Error!",color:"negative"})}y(t.value)}async function z(S){let _=S;t.value&&(_=t.value+"/"+_),console.log(_);try{const w=await pe("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}),U=await w.json();if(w.ok)e.notify({message:`Folder "${S}" created.`,caption:"Files",type:"positive"}),y(t.value);else throw console.error(U),`Error ${w.status} while creating folder. Please check logs.`}catch(w){console.error(w),e.notify({message:String(w),caption:"Request Error!",color:"negative"})}}return mt(()=>{y()}),{breadcrumbs:x,folder_current:t,folder_columns:i,folder_rows:l,folder_loading:n,pagination:p,selected:c,filter:r,dialog_create_new_folder:v,new_folder_name:g,confirm_delete:q,dialog_upload_files:u,onNameClick:o,onBreadcrumbClick:h,getFolderContent:y,getZip:F,deleteItems:d,createNewFolder:z,getAccessToken:el}},watch:{folder_current(e){this.getFolderContent(e)}}},fa={class:"q-pa-md"},va={class:"text-h6"},ga={class:"text-h6"},ma=["onClick"],ba={class:"q-ml-sm"};function _a(e,t,n,l,i,c){return he(),Le(wl,{id:"admin-files-page",padding:""},{default:N(()=>[fe("div",fa,[T(Fl,{gutter:"sm",style:{cursor:"pointer"}},{default:N(()=>[T(lt,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"sym_o_home",onClick:t[0]||(t[0]=r=>l.onBreadcrumbClick(-1))},null,8,["label"]),(he(!0),ll(al,null,ol(l.breadcrumbs,(r,v)=>(he(),Le(lt,{key:v,onClick:g=>l.onBreadcrumbClick(v)},{default:N(()=>[nl(ye(r),1)]),_:2},1032,["onClick"]))),128))]),_:1}),T(je,{modelValue:l.dialog_create_new_folder,"onUpdate:modelValue":t[4]||(t[4]=r=>l.dialog_create_new_folder=r)},{default:N(()=>[T(Ie,{style:{"min-width":"350px"}},{default:N(()=>[T(Se,null,{default:N(()=>[fe("div",va,ye(e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),T(Se,{class:"q-pt-none"},{default:N(()=>[T(et,{modelValue:l.new_folder_name,"onUpdate:modelValue":t[1]||(t[1]=r=>l.new_folder_name=r),dense:"",autofocus:"",onKeyup:t[2]||(t[2]=rl(r=>[l.createNewFolder(l.new_folder_name),l.dialog_create_new_folder=!1],["enter"]))},null,8,["modelValue"])]),_:1}),T(Qe,{align:"right",class:"text-primary"},{default:N(()=>[we(T(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[qe]]),we(T(H,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:t[3]||(t[3]=r=>l.createNewFolder(l.new_folder_name))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),T(je,{modelValue:l.dialog_upload_files,"onUpdate:modelValue":t[7]||(t[7]=r=>l.dialog_upload_files=r)},{default:N(()=>[T(Ie,{style:{"min-width":"350px"}},{default:N(()=>[T(Se,null,{default:N(()=>[fe("div",ga,ye(e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),T(Se,{class:"q-pt-none"},{default:N(()=>[T(jl,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:l.folder_current}],headers:[{name:"authorization",value:`Bearer ${l.getAccessToken()}`}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:t[5]||(t[5]=r=>l.getFolderContent(l.folder_current)),onUploaded:t[6]||(t[6]=r=>l.dialog_upload_files=!1)},null,8,["form-fields","headers"])]),_:1}),T(Qe,{align:"right",class:"text-primary"},{default:N(()=>[we(T(H,{flat:"",label:"Cancel"},null,512),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),T(ua,{selected:l.selected,"onUpdate:selected":t[15]||(t[15]=r=>l.selected=r),class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:l.pagination,rows:l.folder_rows,filter:l.filter,columns:l.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:l.folder_loading,selection:"multiple","virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":N(r=>[T(ot,{props:r},{default:N(()=>[r.value?(he(),Le(oe,{key:0,name:"sym_o_folder"})):(he(),Le(oe,{key:1,name:"sym_o_description"}))]),_:2},1032,["props"])]),"body-cell-name":N(r=>[T(ot,{props:r,style:{cursor:"pointer"}},{default:N(()=>[fe("div",{onClick:v=>l.onNameClick(r.row)},ye(r.value),9,ma)]),_:2},1032,["props"])]),"top-left":N(()=>[T(je,{modelValue:l.confirm_delete,"onUpdate:modelValue":t[9]||(t[9]=r=>l.confirm_delete=r)},{default:N(()=>[T(Ie,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:N(()=>[T(Se,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:N(()=>[T(il,{icon:"sym_o_delete",color:"negative","text-color":"white"}),fe("span",ba,ye(e.$t("Are you sure you want to delete the selected files and subfolders?")),1)]),_:1}),T(Qe,{align:"right"},{default:N(()=>[we(T(H,{flat:"",label:e.$t("BTN_LABEL_CANCEL"),color:"primary"},null,8,["label"]),[[qe]]),we(T(H,{label:e.$t("yes, delete"),color:"negative",onClick:t[8]||(t[8]=r=>l.deleteItems(l.selected))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),fe("div",null,[T(H,{disable:l.folder_loading,label:e.$t("BTN_LABEL_FILES_NEW_FOLDER"),onClick:t[10]||(t[10]=r=>l.dialog_create_new_folder=!0)},null,8,["disable","label"]),T(H,{class:"q-ml-sm",disable:l.folder_loading,label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE"),onClick:t[11]||(t[11]=r=>l.dialog_upload_files=!0)},null,8,["disable","label"]),T(H,{class:"q-ml-sm",disable:l.selected.length==0,label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP"),onClick:t[12]||(t[12]=r=>l.getZip(l.selected))},null,8,["disable","label"]),T(H,{class:"q-ml-sm",color:"negative",disable:l.selected.length==0,label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED"),onClick:t[13]||(t[13]=r=>l.confirm_delete=!0)},null,8,["disable","label"])])]),"top-right":N(()=>[T(et,{modelValue:l.filter,"onUpdate:modelValue":t[14]||(t[14]=r=>l.filter=r),borderless:"",dense:"",debounce:"300",placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:N(()=>[T(oe,{name:"sym_o_search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["selected","pagination","rows","filter","columns","loading"])])]),_:1})}const Ua=tl(da,[["render",_a],["__file","AdminFilesPage.vue"]]);export{Ua as default};
