import{N as P,O as B,n as Q,P as g,R as y,c as _,s as h,T,S as q,K as C,d as D,_ as k,e as d,f as m,l as a,x as v,E as $,h as E,M as V,r as p,j as S,k as c,F as L,B as j,U as G,D as N,Q as O,z as A}from"./index-DyBYTJ4X.js";import{Q as F}from"./QPageSticky-BIdSSEX9.js";import{Q as H}from"./QPage-Df3VR9X2.js";import{Q as R}from"./QImg-CI_Sy0dE.js";const I={threshold:0,root:null,rootMargin:"0px"};function w(e,t,n){let o,i,r;typeof n=="function"?(o=n,i=I,r=t.cfg===void 0):(o=n.handler,i=Object.assign({},I,n.cfg),r=t.cfg===void 0||B(t.cfg,i)===!1),t.handler!==o&&(t.handler=o),r===!0&&(t.cfg=i,t.observer!==void 0&&t.observer.unobserve(e),t.observer=new IntersectionObserver(([s])=>{if(typeof t.handler=="function"){if(s.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(s,t.observer)===!1||t.once===!0&&s.isIntersecting===!0)&&M(e)}},i),t.observer.observe(e))}function M(e){const t=e.__qvisible;t!==void 0&&(t.observer!==void 0&&t.observer.unobserve(e),delete e.__qvisible)}const K=P({name:"intersection",mounted(e,{modifiers:t,value:n}){const o={once:t.once===!0};w(e,o,n),e.__qvisible=o},updated(e,t){const n=e.__qvisible;n!==void 0&&w(e,n,t.value)},beforeUnmount:M}),U=Q({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:n}){const o=g(y.value===!0?e.ssrPrerender:!1),i=_(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:l,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:l),r=_(()=>e.disable!==!0&&(y.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),s=_(()=>[[K,i.value,void 0,{once:e.once}]]),u=_(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function l(f){o.value!==f.isIntersecting&&(o.value=f.isIntersecting,e.onVisibility!==void 0&&n("visibility",o.value))}function b(){if(o.value===!0)return[h("div",{key:"content",style:u.value},C(t.default))];if(t.hidden!==void 0)return[h("div",{key:"hidden",style:u.value},t.hidden())]}return()=>{const f=e.transition?[h(T,{name:"q-transition--"+e.transition},b)]:b();return q(e.tag,{class:"q-intersection"},f,"main",r.value,()=>s.value)}}}),Y=D({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e,{expose:t}){t();const n={};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),z={key:0},x={key:1},J={class:"absolute-full"},W=["src"];function X(e,t,n,o,i,r){return n.item.media_type!="video"?(d(),m("div",z,[a(R,{src:n.item.thumbnail,loading:"eager","no-transition":"","no-spinner":"",ratio:1,class:"rounded-borders"},null,8,["src"])])):(d(),m("div",x,[t[0]||(t[0]=v("div",{style:{"padding-bottom":"100%"}},null,-1)),v("div",J,[v("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:n.item.thumbnail,class:"rounded-borders"},null,8,W)])]))}const Z=k(Y,[["render",X],["__file","MediaItemThumbnailViewer.vue"]]),ee={components:{MediaItemThumbnailViewer:Z},setup(){const e=$(),t=E(),n=V();return{store:e,configurationStore:t,mediacollectionStore:n,indexSelected:g(0),showImageDetail:g(!1)}},computed:{itemId(){return this.$route.params.id},isGalleryEmpty(){return this.mediacollectionStore.collection_number_of_items==0}},watch:{itemId(e){const t=this.mediacollectionStore.getIndexOfItemId(e);t==-1?console.error(`image id not found ${e}`):this.openPic(t)}},mounted(){},methods:{openPic(e){this.indexSelected=e,this.showImageDetail=!0}}},te={key:0,class:"row justify-center q-gutter-sm"},ne=["innerHTML"];function oe(e,t,n,o,i,r){const s=p("MediaItemThumbnailViewer"),u=p("router-link");return d(),S(H,{id:"gallery-page",padding:""},{default:c(()=>[r.isGalleryEmpty?(d(),m("div",{key:1,innerHTML:o.configurationStore.getConfigElement("uisettings.GALLERY_EMPTY_MSG")},null,8,ne)):(d(),m("div",te,[(d(!0),m(L,null,j(o.mediacollectionStore.collection,l=>(d(),S(U,{key:l.id,once:"",class:"preview-item"},{default:c(()=>[a(u,{to:{name:"mediaviewer",params:{id:l.id}}},{default:c(()=>[a(G,{class:"q-ma-xs no-shadow"},{default:c(()=>[a(s,{item:l},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))])),a(F,{position:"top-left",offset:[25,25],style:{}},{default:c(()=>[a(N,{id:"slideshow-button-to-frontpage",color:"primary",rounded:"","no-caps":"",to:"/",class:"action-button"},{default:c(()=>[a(O,{left:"",name:"sym_o_arrow_back_ios_new"}),v("div",null,A(e.$t("BTN_LABEL_BACK")),1)]),_:1})]),_:1})]),_:1})}const de=k(ee,[["render",oe],["__scopeId","data-v-0d54d229"],["__file","GalleryPage.vue"]]);export{de as default};
