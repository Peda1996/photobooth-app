import{Q as M,a as b}from"./QLayout-hwGrYFHo.js";import{d as v,u as k,a as y,b as C,c as N,e as f,o as R,w as d,f as l,g as T,h as A,i as B,j as q,k as x,r as E,l as g,m as h,n as w,p,q as L}from"./index-BNYqvihj.js";const Q=v({__name:"RouteAfterTimeout",props:{route:{type:String,required:!0},timeoutMs:{type:Number,required:!0},warningMessage:{type:String,default:"Auto-starting slideshow... Click anywhere to stay on this page."},warningTimeMs:{type:Number,default:1e4}},setup(_){const s=k(),a=y(),t=_,{idle:o,lastActive:r}=C(t.timeoutMs),n=N({interval:1e3}),e=f(()=>t.timeoutMs-(n.value-r.value)),u=f(()=>t.warningTimeMs>e.value);let c=null;function S(){c=s.notify({progress:!0,message:t.warningMessage,type:"info",multiLine:!0,timeout:e.value,icon:"sym_o_slideshow"})}function m(){c&&c()}return R(()=>{m()}),d(u,i=>{i?S():m()}),d(o,i=>{i&&(m(),a.push({path:t.route}))}),(i,$)=>(l(),T("div"))}}),F=v({__name:"MainLayout",setup(_){const s=A(),a=B(),t=q(),o=y(),r=x();return s.$subscribe((n,e)=>{e.state=="counting"&&r.path!="/"&&(console.log("counting state received, pushing to index page to countdown"),o.push("/")),e.state=="present_capture"&&o.push({name:"itempresenter",params:{id:s.last_captured_mediaitem_id}}),e.state=="approve_capture"&&e.ask_user_for_approval&&o.push({path:"/itemapproval"})}),(n,e)=>{const u=E("router-view");return l(),g(b,{id:"main-layout",view:"hHh lpR fFf"},{default:h(()=>[w(M,null,{default:h(()=>[w(u),p(a).configuration.uisettings.enable_automatic_slideshow&&p(t).collection_number_of_items>0?(l(),g(Q,{key:0,route:"/slideshow/random","timeout-ms":p(a).configuration.uisettings.show_automatic_slideshow_timeout*1e3,"warning-message":n.$t("MSG_WARN_BEFORE_AUTO_SLIDESHOW")},null,8,["timeout-ms","warning-message"])):L("",!0)]),_:1})]),_:1})}}});export{F as default};
