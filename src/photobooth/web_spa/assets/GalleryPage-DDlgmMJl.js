import{N as q,O as B,j as C,n as I,P as p,p as u,m as _,T as P,R as Q,S as T,d as $,t as c,i as r,g,x as h,a as D,J as N,f,w as v,B as k,F as V,A as j,C as b,h as E,U as G}from"./index-DcUHqCch.js";import{Q as L}from"./QPage-C10w8r_0.js";import{Q as R}from"./QImg-M5_hhz4H.js";import{_ as A}from"./ReturnButton.vue_vue_type_script_setup_true_lang-DwBSBvdc.js";import{_ as F}from"./RouteAfterTimeout.vue_vue_type_script_setup_true_lang-CJ3M5b5b.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QPageSticky-DV3hJFtR.js";import"./vue-i18n-YXB0_ADm.js";const S={threshold:0,root:null,rootMargin:"0px"};function w(e,t,n){let o,i,a;typeof n=="function"?(o=n,i=S,a=t.cfg===void 0):(o=n.handler,i=Object.assign({},S,n.cfg),a=t.cfg===void 0||B(t.cfg,i)===!1),t.handler!==o&&(t.handler=o),a===!0&&(t.cfg=i,t.observer?.unobserve(e),t.observer=new IntersectionObserver(([s])=>{if(typeof t.handler=="function"){if(s.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(s,t.observer)===!1||t.once===!0&&s.isIntersecting===!0)&&M(e)}},i),t.observer.observe(e))}function M(e){const t=e.__qvisible;t!==void 0&&(t.observer?.unobserve(e),delete e.__qvisible)}const O=q({name:"intersection",mounted(e,{modifiers:t,value:n}){const o={once:t.once===!0};w(e,o,n),e.__qvisible=o},updated(e,t){const n=e.__qvisible;n!==void 0&&w(e,n,t.value)},beforeUnmount:M}),U=C({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:n}){const o=I(p.value===!0?e.ssrPrerender:!1),i=u(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:d,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:d),a=u(()=>e.disable!==!0&&(p.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),s=u(()=>[[O,i.value,void 0,{once:e.once}]]),l=u(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function d(m){o.value!==m.isIntersecting&&(o.value=m.isIntersecting,e.onVisibility!==void 0&&n("visibility",o.value))}function y(){if(o.value===!0)return[_("div",{key:"content",style:l.value},T(t.default))];if(t.hidden!==void 0)return[_("div",{key:"hidden",style:l.value},t.hidden())]}return()=>{const m=e.transition?[_(P,{name:"q-transition--"+e.transition},y)]:y();return Q(e.tag,{class:"q-intersection"},m,"main",a.value,()=>s.value)}}}),Y={key:0},J={key:1},z={class:"absolute-full"},K=["src"],W=$({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){return(t,n)=>t.item.media_type!="video"?(r(),c("div",Y,[g(R,{src:`/media/thumbnail/${t.item.id}?${t.item.updated_at}`,loading:"eager","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])])):(r(),c("div",J,[n[0]||(n[0]=h("div",{style:{"padding-bottom":"100%"}},null,-1)),h("div",z,[h("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${t.item.id}?${t.item.updated_at}`,class:"rounded-borders"},null,8,K)])]))}}),X={key:0,class:"row justify-center q-gutter-sm"},Z=["innerHTML"],x=$({__name:"GalleryPage",props:{standaloneMode:Boolean},setup(e){const t=e,n=D(),o=N(),i=u(()=>o.collection_number_of_items==0);return(a,s)=>{const l=E("router-link");return r(),f(L,{id:"gallery-page",padding:""},{default:v(()=>[i.value?(r(),c("div",{key:1,innerHTML:b(n).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,Z)):(r(),c("div",X,[(r(!0),c(V,null,j(b(o).collection,d=>(r(),f(U,{key:d.id,once:"",class:"preview-item"},{default:v(()=>[g(l,{to:{name:"mediaviewer",params:{id:d.id}}},{default:v(()=>[g(G,{class:"q-ma-xs no-shadow"},{default:v(()=>[g(W,{item:d},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))])),t.standaloneMode?k("",!0):(r(),f(A,{key:2,onTriggerReturn:s[0]||(s[0]=d=>a.$router.back())})),t.standaloneMode?k("",!0):(r(),f(F,{key:3,route:"/","timeout-ms":b(n).configuration.uisettings.show_frontpage_timeout*60*1e3},null,8,["timeout-ms"]))]),_:1})}}}),de=H(x,[["__scopeId","data-v-dec1be6d"]]);export{de as default};
